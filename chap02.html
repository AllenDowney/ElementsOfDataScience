
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chapter 2 &#8212; Modeling and Simulation in Python</title>
    
  <link rel="stylesheet" href="_static/css/index.f658d18f9b420779cfdf24aa0a7e2d77.css">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/sphinx-book-theme.40e2e510f6b7d1648584402491bb10fe.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="_static/js/index.d3f166471bb80abb5163.js">

    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/togglebutton.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/sphinx-book-theme.d31b09fe5c1d09cb49b26a786de4a05d.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Chapter 3" href="chap03.html" />
    <link rel="prev" title="Chapter 1" href="chap01.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="index.html">
  
  
  <h1 class="site-logo" id="site-title">Modeling and Simulation in Python</h1>
  
</a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>
<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="index.html">
   Modeling and Simulation in Python
  </a>
 </li>
</ul>
<ul class="current nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="preface.html">
   Preface
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="chap01.html">
   Chapter 1
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Chapter 2
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="chap03.html">
   Chapter 3
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="chap04.html">
   Chapter 4
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="chap05.html">
   Chapter 5
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="chap06.html">
   Chapter 6
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="chap07.html">
   Chapter 7
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="chap08.html">
   Chapter 8
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="chap09.html">
   Chapter 9
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="chap10.html">
   Chapter 10
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="chap11.html">
   Chapter 11
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="chap12.html">
   Chapter 12
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="chap13.html">
   Chapter 13
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="chap14.html">
   Chapter 14
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="chap15.html">
   Chapter 15
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="chap16.html">
   Chapter 16
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="chap17.html">
   Chapter 17
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="chap18.html">
   Chapter 18
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="chap19.html">
   Chapter 19
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="chap20.html">
   Chapter 20
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="chap21.html">
   Chapter 21
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="chap22.html">
   Chapter 22
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="chap23.html">
   Chapter 23
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="chap24.html">
   Chapter 24
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="chap25.html">
   Chapter 25
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="chap26.html">
   Chapter 26
  </a>
 </li>
</ul>

</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="_sources/chap02.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

        <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/AllenDowney/ModSimPy"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        
        
    </div>
</div>


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
                title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/AllenDowney/ModSimPy/master?urlpath=tree/chap02.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

    </div>

    <!-- Table of contents -->
    <div class="d-none d-md-block col-md-2 bd-toc show">
        
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> Contents
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#modeling-a-bike-share-system">
   Modeling a Bike Share System
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#defining-functions">
   Defining functions
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#print-statements">
   Print statements
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#if-statements">
   If statements
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#parameters">
   Parameters
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#for-loops">
   For loops
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#timeseries">
   TimeSeries
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#plotting">
   Plotting
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#summary">
   Summary
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#exercises">
   Exercises
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#under-the-hood">
   Under the Hood
  </a>
 </li>
</ul>

        </nav>
        
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="chapter-2">
<h1>Chapter 2<a class="headerlink" href="#chapter-2" title="Permalink to this headline">¶</a></h1>
<p><a class="reference external" href="https://colab.research.google.com/github/AllenDowney/ModSimPy/blob/master/chapters/chap02.ipynb">Click here to run this chapter on Colab</a></p>
<p>This chapter presents a simple model of a bike share system and
demonstrates the features of Python we’ll use to develop simulations of real-world systems.</p>
<p>Along the way, we’ll make decisions about how to model the system. In
the next chapter we’ll review these decisions and gradually improve the model.</p>
<div class="section" id="modeling-a-bike-share-system">
<h2>Modeling a Bike Share System<a class="headerlink" href="#modeling-a-bike-share-system" title="Permalink to this headline">¶</a></h2>
<p>Imagine a bike share system for students traveling between Olin College and Wellesley College, which are about 3 miles apart in eastern Massachusetts.</p>
<p>Suppose the system contains 12 bikes and two bike racks, one at Olin and one at Wellesley, each with the capacity to hold 12 bikes.</p>
<p>As students arrive, check out a bike, and ride to the other campus, the number of bikes in each location changes. In the simulation, we’ll need to keep track of where the bikes are. To do that, we’ll use a function called <code class="docutils literal notranslate"><span class="pre">State</span></code>, which is defined in the ModSim library.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bikeshare</span> <span class="o">=</span> <span class="n">State</span><span class="p">(</span><span class="n">olin</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">wellesley</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>The expressions in parentheses are <strong>keyword arguments</strong>.
They create two variables, <code class="docutils literal notranslate"><span class="pre">olin</span></code> and <code class="docutils literal notranslate"><span class="pre">wellesley</span></code>, and give them values.</p>
<p>Then we call the <code class="docutils literal notranslate"><span class="pre">State</span></code> function.
The result is a <code class="docutils literal notranslate"><span class="pre">State</span></code> object, which is a collection of <strong>state variables</strong>.</p>
<p>In this example, the state variables represent the number of
bikes at each location. The initial values are 10 and 2, indicating that there are 10 bikes at Olin and 2 at Wellesley.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">State</span></code> object is assigned to a new variable named <code class="docutils literal notranslate"><span class="pre">bikeshare</span></code>.
We can read the variables inside a <code class="docutils literal notranslate"><span class="pre">State</span></code> object using the <strong>dot
operator</strong>, like this:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bikeshare</span><span class="o">.</span><span class="n">olin</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>10
</pre></div>
</div>
</div>
</div>
<p>And this:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bikeshare</span><span class="o">.</span><span class="n">wellesley</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2
</pre></div>
</div>
</div>
</div>
<p>Or, to display the state variables and their values, you can just type the name of the object:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bikeshare</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>olin         10
wellesley     2
Name: state, dtype: int64
</pre></div>
</div>
</div>
</div>
<p>These values make up the <strong>state</strong> of the system.</p>
<p>The ModSim library provides a function called <code class="docutils literal notranslate"><span class="pre">show</span></code> that displays a <code class="docutils literal notranslate"><span class="pre">State</span></code> object as a table.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">show</span><span class="p">(</span><span class="n">bikeshare</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>state</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>olin</th>
      <td>10</td>
    </tr>
    <tr>
      <th>wellesley</th>
      <td>2</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>You don’t have to use <code class="docutils literal notranslate"><span class="pre">show</span></code>, but I think the results look better.</p>
<p>We can update the state by assigning new values to the variables.
For example, if a student moves a bike from Olin to Wellesley, we can figure out the new values and assign them:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bikeshare</span><span class="o">.</span><span class="n">olin</span> <span class="o">=</span> <span class="mi">9</span>
<span class="n">bikeshare</span><span class="o">.</span><span class="n">wellesley</span> <span class="o">=</span> <span class="mi">3</span>
</pre></div>
</div>
</div>
</div>
<p>Or we can use <strong>update operators</strong>, <code class="docutils literal notranslate"><span class="pre">-=</span></code> and <code class="docutils literal notranslate"><span class="pre">+=</span></code>, to subtract 1 from
<code class="docutils literal notranslate"><span class="pre">olin</span></code> and add 1 to <code class="docutils literal notranslate"><span class="pre">wellesley</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bikeshare</span><span class="o">.</span><span class="n">olin</span> <span class="o">-=</span> <span class="mi">1</span>
<span class="n">bikeshare</span><span class="o">.</span><span class="n">wellesley</span> <span class="o">+=</span> <span class="mi">1</span>
</pre></div>
</div>
</div>
</div>
<p>The result is the same either way.</p>
</div>
<div class="section" id="defining-functions">
<h2>Defining functions<a class="headerlink" href="#defining-functions" title="Permalink to this headline">¶</a></h2>
<p>So far we have used functions defined in NumPy and the ModSim library. Now we’re going to define our own functions.</p>
<p>When you are developing code in Jupyter, it is often efficient to write a few lines of code, test them to confirm they do what you intend, and then use them to define a new function. For example, these lines move a bike from Olin to Wellesley:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bikeshare</span><span class="o">.</span><span class="n">olin</span> <span class="o">-=</span> <span class="mi">1</span>
<span class="n">bikeshare</span><span class="o">.</span><span class="n">wellesley</span> <span class="o">+=</span> <span class="mi">1</span>
</pre></div>
</div>
</div>
</div>
<p>Rather than repeat them every time a bike moves, we can define a new
function:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">bike_to_wellesley</span><span class="p">():</span>
    <span class="n">bikeshare</span><span class="o">.</span><span class="n">olin</span> <span class="o">-=</span> <span class="mi">1</span>
    <span class="n">bikeshare</span><span class="o">.</span><span class="n">wellesley</span> <span class="o">+=</span> <span class="mi">1</span>
</pre></div>
</div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">def</span></code> is a special word in Python that indicates we are defining a new
function. The name of the function is <code class="docutils literal notranslate"><span class="pre">bike_to_wellesley</span></code>. The empty
parentheses indicate that this function requires no additional
information when it runs. The colon indicates the beginning of an
indented <strong>code block</strong>.</p>
<p>The next two lines are the <strong>body</strong> of the function. They have to be
indented; by convention, the indentation is 4 spaces.</p>
<p>When you define a function, it has no immediate effect. The body of the
function doesn’t run until you <strong>call</strong> the function. Here’s how to call
this function:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bike_to_wellesley</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>When you call the function, it runs the statements in the body, which
update the variables of the <code class="docutils literal notranslate"><span class="pre">bikeshare</span></code> object; you can check by
displaying the new state.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">show</span><span class="p">(</span><span class="n">bikeshare</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>state</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>olin</th>
      <td>6</td>
    </tr>
    <tr>
      <th>wellesley</th>
      <td>6</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>When you call a function, you have to include the parentheses. If you
leave them out, you get this:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bike_to_wellesley</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;function __main__.bike_to_wellesley()&gt;
</pre></div>
</div>
</div>
</div>
<p>This result indicates that <code class="docutils literal notranslate"><span class="pre">bike_to_wellesley</span></code> is a function. You don’t have to know what <code class="docutils literal notranslate"><span class="pre">__main__</span></code> means, but if you see something like this, it probably means that you named a function but didn’t actually call it.
So don’t forget the parentheses.</p>
</div>
<div class="section" id="print-statements">
<h2>Print statements<a class="headerlink" href="#print-statements" title="Permalink to this headline">¶</a></h2>
<p>As you write more complicated programs, it is easy to lose track of what
is going on. One of the most useful tools for debugging is the <strong>print
statement</strong>, which displays text in the Jupyter notebook.</p>
<p>Normally when Jupyter runs the code in a cell, it displays the value of
the last line of code. For example, if you run:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bikeshare</span><span class="o">.</span><span class="n">olin</span>
<span class="n">bikeshare</span><span class="o">.</span><span class="n">wellesley</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>6
</pre></div>
</div>
</div>
</div>
<p>Jupyter runs both lines, but it only displays the value of the
second. If you want to display more than one value, you can use
print statements:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">bikeshare</span><span class="o">.</span><span class="n">olin</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">bikeshare</span><span class="o">.</span><span class="n">wellesley</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>6
6
</pre></div>
</div>
</div>
</div>
<p>When you call the <code class="docutils literal notranslate"><span class="pre">print</span></code> function, you can put a variable in
parentheses, as in the previous example, or you can provide a sequence
of variables separated by commas, like this:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">bikeshare</span><span class="o">.</span><span class="n">olin</span><span class="p">,</span> <span class="n">bikeshare</span><span class="o">.</span><span class="n">wellesley</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>6 6
</pre></div>
</div>
</div>
</div>
<p>Python looks up the values of the variables and displays them; in this
example, it displays two values on the same line, with a space between
them.</p>
<p>Print statements are useful for debugging functions. For example, we can
add a print statement to <code class="docutils literal notranslate"><span class="pre">move_bike</span></code>, like this:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">bike_to_wellesley</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Moving a bike to Wellesley&#39;</span><span class="p">)</span>
    <span class="n">bikeshare</span><span class="o">.</span><span class="n">olin</span> <span class="o">-=</span> <span class="mi">1</span>
    <span class="n">bikeshare</span><span class="o">.</span><span class="n">wellesley</span> <span class="o">+=</span> <span class="mi">1</span>
</pre></div>
</div>
</div>
</div>
<p>Each time we call this version of the function, it displays a message,
which can help us keep track of what the program is doing.
The message in this example is a <strong>string</strong>, which is a sequence of
letters and other symbols in quotes.</p>
<p>Just like <code class="docutils literal notranslate"><span class="pre">bike_to_wellesley</span></code>, we can define a function that moves a
bike from Wellesley to Olin:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">bike_to_olin</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Moving a bike to Olin&#39;</span><span class="p">)</span>
    <span class="n">bikeshare</span><span class="o">.</span><span class="n">wellesley</span> <span class="o">-=</span> <span class="mi">1</span>
    <span class="n">bikeshare</span><span class="o">.</span><span class="n">olin</span> <span class="o">+=</span> <span class="mi">1</span>
</pre></div>
</div>
</div>
</div>
<p>And call it like this:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bike_to_olin</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Moving a bike to Olin
</pre></div>
</div>
</div>
</div>
<p>One benefit of defining functions is that you avoid repeating chunks of
code, which makes programs smaller. Another benefit is that the name you
give the function documents what it does, which makes programs more
readable.</p>
</div>
<div class="section" id="if-statements">
<h2>If statements<a class="headerlink" href="#if-statements" title="Permalink to this headline">¶</a></h2>
<p>The ModSim library provides a function called <code class="docutils literal notranslate"><span class="pre">flip</span></code> that generates random “coin tosses”.
When you call it, you provide a probability between 0 and 1, like this:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">flip</span><span class="p">(</span><span class="mf">0.7</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>False
</pre></div>
</div>
</div>
</div>
<p>The result is one of two values: <code class="docutils literal notranslate"><span class="pre">True</span></code> with probability 0.7 (in this example) or <code class="docutils literal notranslate"><span class="pre">False</span></code>
with probability 0.3. If you run <code class="docutils literal notranslate"><span class="pre">flip</span></code> like this 100 times, you should
get <code class="docutils literal notranslate"><span class="pre">True</span></code> about 70 times and <code class="docutils literal notranslate"><span class="pre">False</span></code> about 30 times. But the results
are random, so they might differ from these expectations.</p>
<p><code class="docutils literal notranslate"><span class="pre">True</span></code> and <code class="docutils literal notranslate"><span class="pre">False</span></code> are special values defined by Python.
They are called <strong>boolean</strong> values because they are
related to Boolean algebra (<a class="reference external" href="https://modsimpy.com/boolean">https://modsimpy.com/boolean</a>).</p>
<p>Note that they are not strings. There is a difference between <code class="docutils literal notranslate"><span class="pre">True</span></code>, which is a boolean value, and <code class="docutils literal notranslate"><span class="pre">'True'</span></code>, which is a string.</p>
<p>We can use boolean values to control the behavior of the program, using an <strong>if statement</strong>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">flip</span><span class="p">(</span><span class="mf">0.5</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;heads&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>heads
</pre></div>
</div>
</div>
</div>
<p>If the result from <code class="docutils literal notranslate"><span class="pre">flip</span></code> is <code class="docutils literal notranslate"><span class="pre">True</span></code>, the program displays the string
<code class="docutils literal notranslate"><span class="pre">'heads'</span></code>. Otherwise it does nothing.</p>
<p>The syntax for <code class="docutils literal notranslate"><span class="pre">if</span></code> statements is similar to the syntax for
function definitions: the first line has to end with a colon, and the
lines inside the <code class="docutils literal notranslate"><span class="pre">if</span></code> statement have to be indented.</p>
<p>Optionally, you can add an <strong>else clause</strong> to indicate what should
happen if the result is <code class="docutils literal notranslate"><span class="pre">False</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">flip</span><span class="p">(</span><span class="mf">0.5</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;heads&#39;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;tails&#39;</span><span class="p">)</span>    
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>tails
</pre></div>
</div>
</div>
</div>
<p>If you run the previous cell a few times, it should print <code class="docutils literal notranslate"><span class="pre">heads</span></code> about half the time, and <code class="docutils literal notranslate"><span class="pre">tails</span></code> about half the time.</p>
<p>Now we can use <code class="docutils literal notranslate"><span class="pre">flip</span></code> to simulate the arrival of students who want to
borrow a bike. Suppose students arrive at the Olin station every 2
minutes on average.
In that case, the chance of an arrival during any one-minute period is 50%, and we can simulate it like this:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">flip</span><span class="p">(</span><span class="mf">0.5</span><span class="p">):</span>
    <span class="n">bike_to_wellesley</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Moving a bike to Wellesley
</pre></div>
</div>
</div>
</div>
<p>If students arrive at the Wellesley station every 3 minutes, on average,
the chance of an arrival during any one-minute period is 33%, and we can
simulate it like this:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">flip</span><span class="p">(</span><span class="mf">0.33</span><span class="p">):</span>
    <span class="n">bike_to_olin</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>We can combine these snippets into a function that simulates a <strong>time
step</strong>, which is an interval of time, in this case one minute:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">step</span><span class="p">():</span>
    <span class="k">if</span> <span class="n">flip</span><span class="p">(</span><span class="mf">0.5</span><span class="p">):</span>
        <span class="n">bike_to_wellesley</span><span class="p">()</span>
    
    <span class="k">if</span> <span class="n">flip</span><span class="p">(</span><span class="mf">0.33</span><span class="p">):</span>
        <span class="n">bike_to_olin</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>Then we can simulate a time step like this:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">step</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Moving a bike to Wellesley
</pre></div>
</div>
</div>
</div>
<p>Depending on the results from <code class="docutils literal notranslate"><span class="pre">flip</span></code>, this function might move a bike to Olin, or to Wellesley, or neither, or both.</p>
</div>
<div class="section" id="parameters">
<h2>Parameters<a class="headerlink" href="#parameters" title="Permalink to this headline">¶</a></h2>
<p>The previous version of <code class="docutils literal notranslate"><span class="pre">step</span></code> is fine if the arrival probabilities
never change, but in reality they vary over time.</p>
<p>So instead of putting the constant values 0.5 and 0.33 in <code class="docutils literal notranslate"><span class="pre">step</span></code>, we can replace them with <strong>parameters</strong>.
Parameters are variables whose values are set when a function is called.</p>
<p>Here’s a version of <code class="docutils literal notranslate"><span class="pre">step</span></code> that takes two parameters, <code class="docutils literal notranslate"><span class="pre">p1</span></code> and <code class="docutils literal notranslate"><span class="pre">p2</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">step</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">flip</span><span class="p">(</span><span class="n">p1</span><span class="p">):</span>
        <span class="n">bike_to_wellesley</span><span class="p">()</span>
    
    <span class="k">if</span> <span class="n">flip</span><span class="p">(</span><span class="n">p2</span><span class="p">):</span>
        <span class="n">bike_to_olin</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>The values of <code class="docutils literal notranslate"><span class="pre">p1</span></code> and <code class="docutils literal notranslate"><span class="pre">p2</span></code> are not set inside this function; instead,
they are provided when the function is called, like this:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">step</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.33</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Moving a bike to Olin
</pre></div>
</div>
</div>
</div>
<p>The values you provide when you call the function are called
<strong>arguments</strong>. The arguments, <code class="docutils literal notranslate"><span class="pre">0.5</span></code> and <code class="docutils literal notranslate"><span class="pre">0.33</span></code> in this example, get
assigned to the parameters, <code class="docutils literal notranslate"><span class="pre">p1</span></code> and <code class="docutils literal notranslate"><span class="pre">p2</span></code>, in order. So running this
function has the same effect as:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">p1</span> <span class="o">=</span> <span class="mf">0.5</span>
<span class="n">p2</span> <span class="o">=</span> <span class="mf">0.33</span>

<span class="k">if</span> <span class="n">flip</span><span class="p">(</span><span class="n">p1</span><span class="p">):</span>
    <span class="n">bike_to_wellesley</span><span class="p">()</span>
    
<span class="k">if</span> <span class="n">flip</span><span class="p">(</span><span class="n">p2</span><span class="p">):</span>
    <span class="n">bike_to_olin</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Moving a bike to Wellesley
</pre></div>
</div>
</div>
</div>
<p>The advantage of using parameters is that you can call the same function many times, providing different arguments each time.</p>
<p>Adding parameters to a function is called <strong>generalization</strong>, because it makes the function more general, that is, less specialized.</p>
</div>
<div class="section" id="for-loops">
<h2>For loops<a class="headerlink" href="#for-loops" title="Permalink to this headline">¶</a></h2>
<p>At some point you will get sick of running cells over and over.
Fortunately, there is an easy way to repeat a chunk of code, the <strong>for
loop</strong>. Here’s an example:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="n">bike_to_wellesley</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0
Moving a bike to Wellesley
1
Moving a bike to Wellesley
2
Moving a bike to Wellesley
</pre></div>
</div>
</div>
</div>
<p>The syntax here should look familiar; the first line ends with a
colon, and the lines inside the <code class="docutils literal notranslate"><span class="pre">for</span></code> loop are indented. The other
elements of the loop are:</p>
<ul class="simple">
<li><p>The words <code class="docutils literal notranslate"><span class="pre">for</span></code> and <code class="docutils literal notranslate"><span class="pre">in</span></code> are special words we have to use in a for
loop.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">range</span></code> is a Python function we use to control the number of times the loop runs.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">i</span></code> is a <strong>loop variable</strong> that gets created when the for loop runs.</p></li>
</ul>
<p>When this loop runs, it runs the statements inside the loop three times.  The first time, the value of <code class="docutils literal notranslate"><span class="pre">i</span></code> is <code class="docutils literal notranslate"><span class="pre">0</span></code>; the second time, it is <code class="docutils literal notranslate"><span class="pre">1</span></code>; the third time, it is <code class="docutils literal notranslate"><span class="pre">2</span></code>.</p>
<p>Each time through the loop, it prints the value of <code class="docutils literal notranslate"><span class="pre">i</span></code> and moves one bike to Wellesley.</p>
</div>
<div class="section" id="timeseries">
<h2>TimeSeries<a class="headerlink" href="#timeseries" title="Permalink to this headline">¶</a></h2>
<p>When we run a simulation, we often want to save the results for later analysis. The ModSim library provides a <code class="docutils literal notranslate"><span class="pre">TimeSeries</span></code> object for this purpose. A <code class="docutils literal notranslate"><span class="pre">TimeSeries</span></code> contains a sequence of time stamps and a
corresponding sequence of quantities.</p>
<p>In this example, the time stamps are integers representing minutes and the quantities are the number of bikes at one location.</p>
<p>Since we have moved a number of bikes around, let’s start again with a new <code class="docutils literal notranslate"><span class="pre">State</span></code> object.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bikeshare</span> <span class="o">=</span> <span class="n">State</span><span class="p">(</span><span class="n">olin</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">wellesley</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>We can create a new, empty <code class="docutils literal notranslate"><span class="pre">TimeSeries</span></code> like this:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">results</span> <span class="o">=</span> <span class="n">TimeSeries</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>And we can add a quantity like this:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">results</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">bikeshare</span><span class="o">.</span><span class="n">olin</span>
</pre></div>
</div>
</div>
</div>
<p>The number in brackets is the time stamp, also called a <strong>label</strong>.</p>
<p>We can use a <code class="docutils literal notranslate"><span class="pre">TimeSeries</span></code> inside a for loop to store the results of the simulation:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="n">step</span><span class="p">(</span><span class="mf">0.6</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">)</span>
    <span class="n">results</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">bikeshare</span><span class="o">.</span><span class="n">olin</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0
1
Moving a bike to Wellesley
2
Moving a bike to Wellesley
Moving a bike to Olin
</pre></div>
</div>
</div>
</div>
<p>Each time through the loop, we print the value of <code class="docutils literal notranslate"><span class="pre">i</span></code> and call <code class="docutils literal notranslate"><span class="pre">step</span></code>, which updates <code class="docutils literal notranslate"><span class="pre">bikeshare</span></code>.
Then we store the number of bikes at Olin in <code class="docutils literal notranslate"><span class="pre">results</span></code>.
We use the loop variable, <code class="docutils literal notranslate"><span class="pre">i</span></code>, to compute the time stamp, <code class="docutils literal notranslate"><span class="pre">i+1</span></code>.</p>
<p>The first time through the loop, the value of <code class="docutils literal notranslate"><span class="pre">i</span></code> is <code class="docutils literal notranslate"><span class="pre">0</span></code>, so the time stamp is <code class="docutils literal notranslate"><span class="pre">1</span></code>.
The last time, the value of <code class="docutils literal notranslate"><span class="pre">i</span></code> is <code class="docutils literal notranslate"><span class="pre">2</span></code>, so the time stamp is <code class="docutils literal notranslate"><span class="pre">3</span></code>.</p>
<p>When the loop exits, <code class="docutils literal notranslate"><span class="pre">results</span></code> contains 4 time stamps, from 0 through
3, and the number of bikes at Olin at the end of each time step.</p>
<p>We can display the <code class="docutils literal notranslate"><span class="pre">TimeSeries</span></code> like this:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">show</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Quantity</th>
    </tr>
    <tr>
      <th>Time</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>10</td>
    </tr>
    <tr>
      <th>1</th>
      <td>10</td>
    </tr>
    <tr>
      <th>2</th>
      <td>9</td>
    </tr>
    <tr>
      <th>3</th>
      <td>9</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>The left column is the time stamps; the right column is the quantities.</p>
</div>
<div class="section" id="plotting">
<h2>Plotting<a class="headerlink" href="#plotting" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">results</span></code> provides a function called <code class="docutils literal notranslate"><span class="pre">plot</span></code> we can use to plot
the results, and the ModSim library provides <code class="docutils literal notranslate"><span class="pre">decorate</span></code>, which we can use to label the axes and give the figure a title:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">results</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>

<span class="n">decorate</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Olin-Wellesley Bikeshare&#39;</span><span class="p">,</span>
         <span class="n">xlabel</span><span class="o">=</span><span class="s1">&#39;Time step (min)&#39;</span><span class="p">,</span> 
         <span class="n">ylabel</span><span class="o">=</span><span class="s1">&#39;Number of bikes&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/chap02_83_0.png" src="_images/chap02_83_0.png" />
</div>
</div>
<p>The result should be a plot with time on the <span class="math notranslate nohighlight">\(x\)</span>-axis and the number of bikes on the <span class="math notranslate nohighlight">\(y\)</span>-axis.
Since we only ran three time steps, it might not be very interesting.</p>
</div>
<div class="section" id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>This chapter introduces the tools we need to run simulations, record the results, and plot them.</p>
<p>We used a <code class="docutils literal notranslate"><span class="pre">State</span></code> object to represent the state of the system.
Then we used the <code class="docutils literal notranslate"><span class="pre">flip</span></code> function and an <code class="docutils literal notranslate"><span class="pre">if</span></code> statement to simulate a single time step.
We used a <code class="docutils literal notranslate"><span class="pre">for</span></code> loop to simulate a series of steps, and a <code class="docutils literal notranslate"><span class="pre">TimeSeries</span></code> to record the results.
Finally, we used <code class="docutils literal notranslate"><span class="pre">plot</span></code> and <code class="docutils literal notranslate"><span class="pre">decorate</span></code> to plot the results.</p>
<p>In the next chapter, we will extend this simulation to make it a little more realistic.</p>
</div>
<div class="section" id="exercises">
<h2>Exercises<a class="headerlink" href="#exercises" title="Permalink to this headline">¶</a></h2>
<p><strong>Exercise:</strong> What happens if you spell the name of a state variable wrong?  Edit the following cell, change the spelling of <code class="docutils literal notranslate"><span class="pre">wellesley</span></code>, and run it.</p>
<p>The error message uses the word “attribute”, which is another name for what we are calling a state variable.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bikeshare</span> <span class="o">=</span> <span class="n">State</span><span class="p">(</span><span class="n">olin</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">wellesley</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

<span class="n">bikeshare</span><span class="o">.</span><span class="n">wellesley</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2
</pre></div>
</div>
</div>
</div>
<p><strong>Exercise:</strong> Make a <code class="docutils literal notranslate"><span class="pre">State</span></code> object with a third state variable, called <code class="docutils literal notranslate"><span class="pre">babson</span></code>, with initial value 0, and display the state of the system.</p>
<div class="cell tag_hide-cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Solution</span>

<span class="n">bikeshare</span> <span class="o">=</span> <span class="n">State</span><span class="p">(</span><span class="n">olin</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">wellesley</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">babson</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">bikeshare</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>state</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>olin</th>
      <td>10</td>
    </tr>
    <tr>
      <th>wellesley</th>
      <td>2</td>
    </tr>
    <tr>
      <th>babson</th>
      <td>0</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p><strong>Exercise:</strong> Wrap the code in the chapter in a function named <code class="docutils literal notranslate"><span class="pre">run_simulation</span></code> that takes three parameters, named <code class="docutils literal notranslate"><span class="pre">p1</span></code>, <code class="docutils literal notranslate"><span class="pre">p2</span></code>, and <code class="docutils literal notranslate"><span class="pre">num_steps</span></code>.</p>
<p>It should:</p>
<ol class="simple">
<li><p>Create a <code class="docutils literal notranslate"><span class="pre">TimeSeries</span></code> object to hold the results.</p></li>
<li><p>Use a for loop to run <code class="docutils literal notranslate"><span class="pre">step</span></code> the number of times specified by <code class="docutils literal notranslate"><span class="pre">num_steps</span></code>, passing along the specified values of <code class="docutils literal notranslate"><span class="pre">p1</span></code> and <code class="docutils literal notranslate"><span class="pre">p2</span></code>.</p></li>
<li><p>After each step, it should save the number of bikes at Olin in the <code class="docutils literal notranslate"><span class="pre">TimeSeries</span></code>.</p></li>
<li><p>After the for loop, it should plot the results and</p></li>
<li><p>Decorate the axes.</p></li>
</ol>
<p>To test your function:</p>
<ol class="simple">
<li><p>Create a <code class="docutils literal notranslate"><span class="pre">State</span></code> object with the initial state of the system.</p></li>
<li><p>Call <code class="docutils literal notranslate"><span class="pre">run_simulation</span></code> with parameters <code class="docutils literal notranslate"><span class="pre">p1=0.3</span></code>, <code class="docutils literal notranslate"><span class="pre">p2=0.2</span></code>, and <code class="docutils literal notranslate"><span class="pre">num_steps=60</span></code>.</p></li>
</ol>
<div class="cell tag_hide-cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Solution</span>

<span class="k">def</span> <span class="nf">run_simulation</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">,</span> <span class="n">num_steps</span><span class="p">):</span>
    <span class="n">results</span> <span class="o">=</span> <span class="n">TimeSeries</span><span class="p">()</span>
    <span class="n">results</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">bikeshare</span><span class="o">.</span><span class="n">olin</span>
    
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_steps</span><span class="p">):</span>
        <span class="n">step</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">)</span>
        <span class="n">results</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">bikeshare</span><span class="o">.</span><span class="n">olin</span>
        
    <span class="n">results</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
    <span class="n">decorate</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Olin-Wellesley Bikeshare&#39;</span><span class="p">,</span>
             <span class="n">xlabel</span><span class="o">=</span><span class="s1">&#39;Time step (min)&#39;</span><span class="p">,</span> 
             <span class="n">ylabel</span><span class="o">=</span><span class="s1">&#39;Number of bikes&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell tag_hide-cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Solution</span>

<span class="n">bikeshare</span> <span class="o">=</span> <span class="n">State</span><span class="p">(</span><span class="n">olin</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">wellesley</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">run_simulation</span><span class="p">(</span><span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mi">60</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Moving a bike to Wellesley
Moving a bike to Wellesley
Moving a bike to Wellesley
Moving a bike to Olin
Moving a bike to Olin
Moving a bike to Wellesley
Moving a bike to Olin
Moving a bike to Wellesley
Moving a bike to Olin
Moving a bike to Wellesley
Moving a bike to Olin
Moving a bike to Wellesley
Moving a bike to Wellesley
Moving a bike to Wellesley
Moving a bike to Wellesley
Moving a bike to Wellesley
Moving a bike to Wellesley
Moving a bike to Wellesley
Moving a bike to Wellesley
Moving a bike to Olin
Moving a bike to Wellesley
Moving a bike to Olin
Moving a bike to Wellesley
Moving a bike to Wellesley
Moving a bike to Wellesley
Moving a bike to Olin
Moving a bike to Wellesley
Moving a bike to Wellesley
Moving a bike to Wellesley
Moving a bike to Wellesley
Moving a bike to Wellesley
Moving a bike to Olin
Moving a bike to Wellesley
Moving a bike to Olin
</pre></div>
</div>
<img alt="_images/chap02_93_1.png" src="_images/chap02_93_1.png" />
</div>
</div>
</div>
<div class="section" id="under-the-hood">
<h2>Under the Hood<a class="headerlink" href="#under-the-hood" title="Permalink to this headline">¶</a></h2>
<p>This section contains additional information about the functions we’ve used and pointers to their documentation.</p>
<p>You don’t need to know anything in this section, so if you are already feeling overwhelmed, you might want to skip it.
But if you are curious, read on.</p>
<p><code class="docutils literal notranslate"><span class="pre">State</span></code> and <code class="docutils literal notranslate"><span class="pre">TimeSeries</span></code> objects are based on the <code class="docutils literal notranslate"><span class="pre">Series</span></code> object defined by a the Pandas library.
The documentation is at <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.html">https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.html</a>.</p>
<p><code class="docutils literal notranslate"><span class="pre">show</span></code> works by creating another Pandas object, called a <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>, which can be displayed as a table.
We’ll use <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> objects in future chapters.</p>
<p><code class="docutils literal notranslate"><span class="pre">Series</span></code> objects provide their own <code class="docutils literal notranslate"><span class="pre">plot</span></code> function which is why we call it like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">results</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
<p>Instead of like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">plot</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
</pre></div>
</div>
<p>You can read the documentation of <code class="docutils literal notranslate"><span class="pre">Series.plot</span></code> at <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.plot.html">https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.plot.html</a>.</p>
<p><code class="docutils literal notranslate"><span class="pre">decorate</span></code> is based on Matplotlib, which is a widely-used plotting library for Python.  Matplotlib provides separate functions for <code class="docutils literal notranslate"><span class="pre">title</span></code>, <code class="docutils literal notranslate"><span class="pre">xlabel</span></code>, and <code class="docutils literal notranslate"><span class="pre">ylabel</span></code>.
<code class="docutils literal notranslate"><span class="pre">decorate</span></code> makes them a little easier to use.
For the list of keyword arguments you can pass to <code class="docutils literal notranslate"><span class="pre">decorate</span></code>, see <a class="reference external" href="https://matplotlib.org/3.2.2/api/axes_api.html?highlight=axes#module-matplotlib.axes">https://matplotlib.org/3.2.2/api/axes_api.html?highlight=axes#module-matplotlib.axes</a>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">flip</span></code> function uses NumPy’s <code class="docutils literal notranslate"><span class="pre">random</span></code> function to generate a random number between 0 and 1, then returns <code class="docutils literal notranslate"><span class="pre">True</span></code> or <code class="docutils literal notranslate"><span class="pre">False</span></code> with the given probability.</p>
<p>You can get the source code for <code class="docutils literal notranslate"><span class="pre">flip</span></code> (or any other function) by running the following cell.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">source_code</span><span class="p">(</span><span class="n">flip</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>def flip(p=0.5):
    &quot;&quot;&quot;Flips a coin with the given probability.

    p: float 0-1

    returns: boolean (True or False)
    &quot;&quot;&quot;
    return np.random.random() &lt; p
</pre></div>
</div>
</div>
</div>
<p>You might not understand everything in this function yet, but you will.</p>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        
    <a class='left-prev' id="prev-link" href="chap01.html" title="previous page">Chapter 1</a>
    <a class='right-next' id="next-link" href="chap03.html" title="next page">Chapter 3</a>

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Allen B. Downey<br/>
        
            &copy; Copyright 2020.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    
  <script src="_static/js/index.d3f166471bb80abb5163.js"></script>


    
  </body>
</html>