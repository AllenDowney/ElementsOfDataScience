
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Distributions &#8212; Elements of Data Science</title>
    
  <link rel="stylesheet" href="_static/css/index.f658d18f9b420779cfdf24aa0a7e2d77.css">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/sphinx-book-theme.40e2e510f6b7d1648584402491bb10fe.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="_static/js/index.d3f166471bb80abb5163.js">

    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/togglebutton.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/sphinx-book-theme.d31b09fe5c1d09cb49b26a786de4a05d.js"></script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Relationships" href="09_relationships.html" />
    <link rel="prev" title="Dataframes and Series" href="07_dataframes.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="index.html">
  
  
  <h1 class="site-logo" id="site-title">Elements of Data Science</h1>
  
</a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>
<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="README.html">
   Elements of Data Science
  </a>
 </li>
</ul>
<ul class="current nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="01_variables.html">
   Variables and values
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="02_times.html">
   Times and places
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="03_arrays.html">
   Lists and arrays
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="04_loops.html">
   Loops and files
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="05_dictionaries.html">
   Dictionaries
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="06_plotting.html">
   Plotting
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="07_dataframes.html">
   Dataframes and Series
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Distributions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="09_relationships.html">
   Relationships
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="10_regression.html">
   Regression
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="11_resampling.html">
   Resampling
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="12_bootstrap.html">
   Bootstrap Sampling
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="13_hypothesis.html">
   Hypothesis Testing
  </a>
 </li>
</ul>

</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="_sources/08_distributions.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

        <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/AllenDowney/ElementsOfDataScience"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        
        
    </div>
</div>


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
                title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/AllenDowney/ElementsOfDataScience/master?urlpath=tree/08_distributions.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

    </div>

    <!-- Table of contents -->
    <div class="d-none d-md-block col-md-2 bd-toc show">
        
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> Contents
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id1">
   Distributions
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#the-general-social-survey">
   The General Social Survey
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#distribution-of-education">
   Distribution of Education
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#cumulative-distribution-functions">
   Cumulative distribution functions
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#cdf-of-ages">
   CDF of Ages
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#comparing-distributions">
   Comparing distributions
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#income">
   Income
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#modeling-distributions">
   Modeling distributions
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#probability-density-functions">
   Probability Density Functions
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#summary">
   Summary
  </a>
 </li>
</ul>

        </nav>
        
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="distributions">
<h1>Distributions<a class="headerlink" href="#distributions" title="Permalink to this headline">¶</a></h1>
<p><a class="reference external" href="https://colab.research.google.com/github/AllenDowney/ElementsOfDataScience/blob/master/08_distributions.ipynb">Click here to run this notebook on Colab</a> or
<a class="reference external" href="https://github.com/AllenDowney/ElementsOfDataScience/raw/master/08_distributions.ipynb">click here to download it</a>.</p>
<p>In this chapter we’ll see three ways to describe a set of values:</p>
<ul class="simple">
<li><p>A probability mass function (PMF), which represents a set of values and the number of times each one appears in a dataset.</p></li>
<li><p>A cumulative distribution function (CDF), which contains the same information as a PMF in a form that makes it easier to visualize, make comparisons, and perform some computations.</p></li>
<li><p>A kernel density estimate (KDE), which is like a smooth, continuous version of a histogram.</p></li>
</ul>
<p>For examples, we’ll use data from the General Social Survey (GSS) to look at distributions of age and income, and to explore the relationship between income and education.</p>
<p>But we’ll start with one of the most important ideas in statistics, the distribution.</p>
<div class="section" id="id1">
<h2>Distributions<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>A distribution is a set of values and their corresponding probabilities.  For example, if you roll a six-sided die, there are six possible outcomes, the numbers <code class="docutils literal notranslate"><span class="pre">1</span></code> through <code class="docutils literal notranslate"><span class="pre">6</span></code>, and they all have the same probability, <code class="docutils literal notranslate"><span class="pre">1/6</span></code>.</p>
<p>We can represent this distribution of outcomes with a table, like this:</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Value</p></th>
<th class="head"><p>Probability</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>1/6</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>1/6</p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>1/6</p></td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td><p>1/6</p></td>
</tr>
<tr class="row-even"><td><p>5</p></td>
<td><p>1/6</p></td>
</tr>
<tr class="row-odd"><td><p>6</p></td>
<td><p>1/6</p></td>
</tr>
</tbody>
</table>
<p>More generally, there can be any number of values, the values can be any type, and the probabilities do not have to be equal.</p>
<p>To represent distributions in Python, we will use a library called <code class="docutils literal notranslate"><span class="pre">empiricaldist</span></code>, for “empirical distribution”, which means it is based on data rather than a mathematical formula.</p>
<p><code class="docutils literal notranslate"><span class="pre">empiricaldist</span></code> provides an object called <code class="docutils literal notranslate"><span class="pre">Pmf</span></code>, which stands for “probability mass function”.
A <code class="docutils literal notranslate"><span class="pre">Pmf</span></code> object contains a set of possible outcomes and their probabilities.</p>
<p>For example, here’s a <code class="docutils literal notranslate"><span class="pre">Pmf</span></code> that represents the outcome of rolling a six-sided die:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">empiricaldist</span> <span class="kn">import</span> <span class="n">Pmf</span>

<span class="n">outcomes</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">]</span>
<span class="n">die</span> <span class="o">=</span> <span class="n">Pmf</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mi">6</span><span class="p">,</span> <span class="n">outcomes</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>The first argument is the probability of each outcome; the second argument is the list of outcomes.
We can display the result like this.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">die</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>probs</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>0.166667</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0.166667</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0.166667</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0.166667</td>
    </tr>
    <tr>
      <th>5</th>
      <td>0.166667</td>
    </tr>
    <tr>
      <th>6</th>
      <td>0.166667</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>A <code class="docutils literal notranslate"><span class="pre">Pmf</span></code> object is a specialized version of a Pandas <code class="docutils literal notranslate"><span class="pre">Series</span></code>, so it provides all of the attributes and methods of a <code class="docutils literal notranslate"><span class="pre">Series</span></code>, plus some additional methods we’ll see soon.</p>
</div>
<div class="section" id="the-general-social-survey">
<h2>The General Social Survey<a class="headerlink" href="#the-general-social-survey" title="Permalink to this headline">¶</a></h2>
<p>The examples in this chapter are based on a new dataset, the General Social Survey (GSS).
The GSS has run annually since 1972; it surveys a representative sample of adult residents of the U.S. and asks questions about demographics, personal history, and beliefs about social and political issues.</p>
<p>It is widely used by politicians, policy makers, and researchers, including me.
The GSS dataset contains hundreds of columns; using an online tool call <a class="reference external" href="https://gssdataexplorer.norc.org/">GSS Explorer</a> I’ve selected just a few and created a data extract.</p>
<p>Like the NSFG data we used in the previous chapter, the GSS data is stored in a fixed-width format, described by a Stata data dictionary.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dict_file</span> <span class="o">=</span> <span class="s1">&#39;GSS.dct&#39;</span>
<span class="n">data_file</span> <span class="o">=</span> <span class="s1">&#39;GSS.dat.gz&#39;</span>
</pre></div>
</div>
</div>
</div>
<p>We will use the <code class="docutils literal notranslate"><span class="pre">statadict</span></code> library to read the data dictionary.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">statadict</span> <span class="kn">import</span> <span class="n">parse_stata_dict</span>

<span class="n">stata_dict</span> <span class="o">=</span> <span class="n">parse_stata_dict</span><span class="p">(</span><span class="n">dict_file</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>The data file is compressed with <span class="xref myst">gzip</span>, but we can use the <code class="docutils literal notranslate"><span class="pre">gzip</span></code> library to open it.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">gzip</span>

<span class="n">fp</span> <span class="o">=</span> <span class="n">gzip</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">data_file</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>The result is an object that behaves like a file, so we can pass it as an argument to <code class="docutils literal notranslate"><span class="pre">read_fwf</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">gss</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_fwf</span><span class="p">(</span><span class="n">fp</span><span class="p">,</span> 
                  <span class="n">names</span><span class="o">=</span><span class="n">stata_dict</span><span class="o">.</span><span class="n">names</span><span class="p">,</span> 
                  <span class="n">colspecs</span><span class="o">=</span><span class="n">stata_dict</span><span class="o">.</span><span class="n">colspecs</span><span class="p">)</span>
<span class="n">gss</span><span class="o">.</span><span class="n">shape</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(64814, 6)
</pre></div>
</div>
</div>
</div>
<p>The result is a <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> with 64818 rows, one for each respondent, and 6 columns, one for each variable.
Here are the first few rows.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">gss</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>YEAR</th>
      <th>ID_</th>
      <th>AGE</th>
      <th>EDUC</th>
      <th>SEX</th>
      <th>REALINC</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1972</td>
      <td>1</td>
      <td>23</td>
      <td>16</td>
      <td>2</td>
      <td>18951.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1972</td>
      <td>2</td>
      <td>70</td>
      <td>10</td>
      <td>1</td>
      <td>24366.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1972</td>
      <td>3</td>
      <td>48</td>
      <td>12</td>
      <td>2</td>
      <td>24366.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1972</td>
      <td>4</td>
      <td>27</td>
      <td>17</td>
      <td>2</td>
      <td>30458.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1972</td>
      <td>5</td>
      <td>61</td>
      <td>12</td>
      <td>2</td>
      <td>50763.0</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>You can probably guess what the variables are, and I’ll explain them as we go along.
But if you want more information, you can always <a class="reference external" href="https://gssdataexplorer.norc.org/projects/52787/variables/vfilter">read the codebook</a>.</p>
</div>
<div class="section" id="distribution-of-education">
<h2>Distribution of Education<a class="headerlink" href="#distribution-of-education" title="Permalink to this headline">¶</a></h2>
<p>To get started with this dataset, let’s look at the distribution of <code class="docutils literal notranslate"><span class="pre">EDUC</span></code>, which records the number of years of education for each respondent.  First I’ll select a column from the <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> and use <code class="docutils literal notranslate"><span class="pre">value_counts</span></code> to see what values are in it.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">gss</span><span class="p">[</span><span class="s1">&#39;EDUC&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0       165
1        47
2       152
3       257
4       319
5       402
6       828
7       879
8      2724
9      2083
10     2880
11     3743
12    19663
13     5360
14     7160
15     2910
16     8355
17     1967
18     2384
19      920
20     1439
98       73
99      104
Name: EDUC, dtype: int64
</pre></div>
</div>
</div>
</div>
<p>The result from <code class="docutils literal notranslate"><span class="pre">value_counts</span></code> is a set of possible values and the number of times each one appears, so it is a kind of distribution.</p>
<p>The values <code class="docutils literal notranslate"><span class="pre">98</span></code> and <code class="docutils literal notranslate"><span class="pre">99</span></code> are special codes for “Don’t know” and “No answer”.
We’ll use <code class="docutils literal notranslate"><span class="pre">replace</span></code> to replace these codes with <code class="docutils literal notranslate"><span class="pre">NaN</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="n">educ</span> <span class="o">=</span> <span class="n">gss</span><span class="p">[</span><span class="s1">&#39;EDUC&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">([</span><span class="mi">98</span><span class="p">,</span> <span class="mi">99</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>We’ve already seen one way to visualize a distribution, a histogram.  Here’s the histogram of education level.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="n">educ</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">grid</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Years of education&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Number of respondents&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Histogram of education level&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/08_distributions_35_0.png" src="_images/08_distributions_35_0.png" />
</div>
</div>
<p>Based on the histogram, we can see the general shape of the distribution and the central tendency – it looks like the peak is near 12 years of education.
But a histogram is not the best way to visualize this distribution.</p>
<p>An alternative is a <code class="docutils literal notranslate"><span class="pre">Pmf</span></code>.
<code class="docutils literal notranslate"><span class="pre">Pmf</span></code> provides a function called <code class="docutils literal notranslate"><span class="pre">from_seq</span></code> that takes any kind of sequence – like a list, tuple, or Pandas <code class="docutils literal notranslate"><span class="pre">Series</span></code> – and computes the distribution of the values in the sequence.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pmf_educ</span> <span class="o">=</span> <span class="n">Pmf</span><span class="o">.</span><span class="n">from_seq</span><span class="p">(</span><span class="n">educ</span><span class="p">,</span> <span class="n">normalize</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="nb">type</span><span class="p">(</span><span class="n">pmf_educ</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>empiricaldist.empiricaldist.Pmf
</pre></div>
</div>
</div>
</div>
<p>The keyword argument <code class="docutils literal notranslate"><span class="pre">normalize=False</span></code> indicates that we don’t want to normalize this PMF.  I’ll explain what that means soon.</p>
<p>Here’s what the first few rows look like.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pmf_educ</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>probs</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0.0</th>
      <td>165</td>
    </tr>
    <tr>
      <th>1.0</th>
      <td>47</td>
    </tr>
    <tr>
      <th>2.0</th>
      <td>152</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>In this dataset, there are <code class="docutils literal notranslate"><span class="pre">165</span></code> respondents who report that they have had no formal education, and <code class="docutils literal notranslate"><span class="pre">47</span></code> who have only one year.
Here the last few rows.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pmf_educ</span><span class="o">.</span><span class="n">tail</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>probs</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>18.0</th>
      <td>2384</td>
    </tr>
    <tr>
      <th>19.0</th>
      <td>920</td>
    </tr>
    <tr>
      <th>20.0</th>
      <td>1439</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>There are <code class="docutils literal notranslate"><span class="pre">1439</span></code> respondents who report that they have 20 or more years of formal education, which probably means they attended college and graduate school.</p>
<p>You can use the bracket operator to look up a value in a Pmf and get the corresponding count:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pmf_educ</span><span class="p">[</span><span class="mi">20</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1439
</pre></div>
</div>
</div>
</div>
<p>Usually when we make a PMF, we want to know the <em>fraction</em> of respondents with each value, rather than the counts.  We can do that by setting <code class="docutils literal notranslate"><span class="pre">normalize=True</span></code>; then we get a normalized PMF, that is, a PMF where the values in the second column add up to 1.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pmf_educ_norm</span> <span class="o">=</span> <span class="n">Pmf</span><span class="o">.</span><span class="n">from_seq</span><span class="p">(</span><span class="n">educ</span><span class="p">,</span> <span class="n">normalize</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">pmf_educ_norm</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>probs</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0.0</th>
      <td>0.002553</td>
    </tr>
    <tr>
      <th>1.0</th>
      <td>0.000727</td>
    </tr>
    <tr>
      <th>2.0</th>
      <td>0.002352</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Now if we use the bracket operator, the result is a fraction.
For example, the fraction of people with 12 years of education is about 30%:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pmf_educ_norm</span><span class="p">[</span><span class="mi">16</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.12926033077030183
</pre></div>
</div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">Pmf</span></code> provides a <code class="docutils literal notranslate"><span class="pre">bar</span></code> method that plots the values and their probabilities as a bar chart.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pmf_educ_norm</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;EDUC&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Years of education&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;PMF&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Distribution of years of education&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/08_distributions_49_0.png" src="_images/08_distributions_49_0.png" />
</div>
</div>
<p>In this figure, we can see that the most common value is 12 years, but there are also peaks at 14 and 16, which correspond to two and four years of college.</p>
<p>For this data, the PMF is probably a better choice than the histogram.  The PMF shows all unique values, so we can see where the peaks are.
Because the histogram puts values into bins, it obscures some details.  With this dataset, and the default number of bins, we couldn’t see the peaks at 14 and 16 years.</p>
<p>But PMFs have limitations, too, as we’ll see.  But first, let’s get some practice with PMFs.</p>
<p><strong>Exercise:</strong> Let’s look at another column in this <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>, <code class="docutils literal notranslate"><span class="pre">YEAR</span></code>, which represents the year each respondent was interviewed.</p>
<p>Make an unnormalized PMF for <code class="docutils literal notranslate"><span class="pre">YEAR</span></code> and display the result.
How many respondents were interviewed in 2018?</p>
</div>
<div class="section" id="cumulative-distribution-functions">
<h2>Cumulative distribution functions<a class="headerlink" href="#cumulative-distribution-functions" title="Permalink to this headline">¶</a></h2>
<p>Now we’ll see another way to represent a distribution, the cumulative distribution function (CDF).
<code class="docutils literal notranslate"><span class="pre">empiricaldist</span></code> provides a <code class="docutils literal notranslate"><span class="pre">Cdf</span></code> object that represents a CDF.
We can import it like this:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">empiricaldist</span> <span class="kn">import</span> <span class="n">Cdf</span>
</pre></div>
</div>
</div>
</div>
<p>As an example, suppose we have a sequence of five values:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">values</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span>  
</pre></div>
</div>
</div>
</div>
<p>Here’s the <code class="docutils literal notranslate"><span class="pre">Pmf</span></code> of these values.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Pmf</span><span class="o">.</span><span class="n">from_seq</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>probs</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>0.2</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0.4</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0.2</td>
    </tr>
    <tr>
      <th>5</th>
      <td>0.2</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>If you draw a random value from <code class="docutils literal notranslate"><span class="pre">values</span></code>, the PMF tells you the chance of getting <code class="docutils literal notranslate"><span class="pre">x</span></code>, for any value of <code class="docutils literal notranslate"><span class="pre">x</span></code>.
So the probability of the value <code class="docutils literal notranslate"><span class="pre">1</span></code> is <code class="docutils literal notranslate"><span class="pre">1/5</span></code>; the probability of the value <code class="docutils literal notranslate"><span class="pre">2</span></code> is <code class="docutils literal notranslate"><span class="pre">2/5</span></code>; and the probabilities for <code class="docutils literal notranslate"><span class="pre">3</span></code> and <code class="docutils literal notranslate"><span class="pre">5</span></code> are <code class="docutils literal notranslate"><span class="pre">1/5</span></code> each.</p>
<p>A CDF is similar in the sense that it contains values and their probabilities; the difference is that the probabilities in the CDF are the the cumulative sum of the probabilities in the PMF.</p>
<p>Here’s the <code class="docutils literal notranslate"><span class="pre">Cdf</span></code> for the same five values.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Cdf</span><span class="o">.</span><span class="n">from_seq</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>probs</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>0.2</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0.6</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0.8</td>
    </tr>
    <tr>
      <th>5</th>
      <td>1.0</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>If you draw a random value from <code class="docutils literal notranslate"><span class="pre">values</span></code>, <code class="docutils literal notranslate"><span class="pre">Cdf</span></code> tells you the chance of getting a value <em>less than or equal to</em> <code class="docutils literal notranslate"><span class="pre">x</span></code>, for any given <code class="docutils literal notranslate"><span class="pre">x</span></code>.</p>
<p>So the <code class="docutils literal notranslate"><span class="pre">Cdf</span></code> of <code class="docutils literal notranslate"><span class="pre">1</span></code> is <code class="docutils literal notranslate"><span class="pre">1/5</span></code> because one of the five values in the sequence is less than or equal to 1.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">Cdf</span></code> of 2 is <code class="docutils literal notranslate"><span class="pre">3/5</span></code> because three of the five values are less than or equal to 2.</p>
<p>And the <code class="docutils literal notranslate"><span class="pre">Cdf</span></code> of 5 is <code class="docutils literal notranslate"><span class="pre">5/5</span></code> because all of the values are less than or equal to 5.</p>
</div>
<div class="section" id="cdf-of-ages">
<h2>CDF of Ages<a class="headerlink" href="#cdf-of-ages" title="Permalink to this headline">¶</a></h2>
<p>Now let’s look at a more substantial <code class="docutils literal notranslate"><span class="pre">Cdf</span></code>, the distribution of ages for respondents in the General Social Survey.</p>
<p>The <a class="reference external" href="https://gssdataexplorer.norc.org/variables/53/vshow">variable we’ll use</a> is <code class="docutils literal notranslate"><span class="pre">'AGE'</span></code>.
According to the codebook, the range of the values is from <code class="docutils literal notranslate"><span class="pre">18</span></code> to <code class="docutils literal notranslate"><span class="pre">89</span></code>, where <code class="docutils literal notranslate"><span class="pre">89</span></code> means “89 or older”.
The special codes <code class="docutils literal notranslate"><span class="pre">98</span></code> and <code class="docutils literal notranslate"><span class="pre">99</span></code> mean “Don’t know” and “Didn’t answer”.</p>
<p>I’ll use <code class="docutils literal notranslate"><span class="pre">replace</span></code> to replace the special codes with <code class="docutils literal notranslate"><span class="pre">NaN</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">age</span> <span class="o">=</span> <span class="n">gss</span><span class="p">[</span><span class="s1">&#39;AGE&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">([</span><span class="mi">98</span><span class="p">,</span> <span class="mi">99</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>We can compute the <code class="docutils literal notranslate"><span class="pre">Cdf</span></code> of these values like this:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cdf_age</span> <span class="o">=</span> <span class="n">Cdf</span><span class="o">.</span><span class="n">from_seq</span><span class="p">(</span><span class="n">age</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">Cdf</span></code> provides a method called <code class="docutils literal notranslate"><span class="pre">plot</span></code> that plots the CDF as a line.  Here’s what it looks like.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cdf_age</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>

<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Age (years)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;CDF&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Distribution of age&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/08_distributions_68_0.png" src="_images/08_distributions_68_0.png" />
</div>
</div>
<p>The <span class="math notranslate nohighlight">\(x\)</span>-axis is the ages, from 18 to 89.  The <span class="math notranslate nohighlight">\(y\)</span>-axis is the cumulative probabilities, from 0 to 1.</p>
<p><code class="docutils literal notranslate"><span class="pre">cdf_age</span></code> can be used as a function, so if you give it an age, it returns the corresponding probability (in a NumPy array).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">q</span> <span class="o">=</span> <span class="mi">51</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">cdf_age</span><span class="p">(</span><span class="n">q</span><span class="p">)</span>
<span class="n">p</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array(0.63318676)
</pre></div>
</div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">q</span></code> stands for “quantity”, which is what we are looking up.  <code class="docutils literal notranslate"><span class="pre">p</span></code> stands for probability, which is the result.
In this example, the quantity is age 51, and the corresponding probability is about <code class="docutils literal notranslate"><span class="pre">0.63</span></code>.
That means that about 63% of the respondents are 51 years old or younger.</p>
<p>The arrow in the following figure shows how you could read this value from the CDF, at least approximately.</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cdf_age</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>

<span class="n">x</span> <span class="o">=</span> <span class="mi">17</span>
<span class="n">draw_line</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">q</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
<span class="n">draw_arrow_left</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">q</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Age (years)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">91</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;CDF&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Distribution of age&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/08_distributions_73_0.png" src="_images/08_distributions_73_0.png" />
</div>
</div>
<p>The CDF is an invertible function, which means that if you have a probability, <code class="docutils literal notranslate"><span class="pre">p</span></code>, you can look up the corresponding quantity, <code class="docutils literal notranslate"><span class="pre">q</span></code>.
<code class="docutils literal notranslate"><span class="pre">Cdf</span></code> provides a method called <code class="docutils literal notranslate"><span class="pre">inverse</span></code> that computes the inverse of the cumulative distribution function.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">p1</span> <span class="o">=</span> <span class="mf">0.25</span>
<span class="n">q1</span> <span class="o">=</span> <span class="n">cdf_age</span><span class="o">.</span><span class="n">inverse</span><span class="p">(</span><span class="n">p1</span><span class="p">)</span>
<span class="n">q1</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array(31.)
</pre></div>
</div>
</div>
</div>
<p>In this example, we look up the probability <code class="docutils literal notranslate"><span class="pre">0.25</span></code> and the result is <code class="docutils literal notranslate"><span class="pre">31</span></code>.<br />
That means that 25% of the respondents are age 31 or less.  Another way to say the same thing is “age 31 is the 25th percentile of this distribution”.</p>
<p>If we look up probability <code class="docutils literal notranslate"><span class="pre">0.75</span></code>, it returns <code class="docutils literal notranslate"><span class="pre">59</span></code>, so 75% of the respondents are 59 or younger.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">p2</span> <span class="o">=</span> <span class="mf">0.75</span>
<span class="n">q2</span> <span class="o">=</span> <span class="n">cdf_age</span><span class="o">.</span><span class="n">inverse</span><span class="p">(</span><span class="n">p2</span><span class="p">)</span>
<span class="n">q2</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array(59.)
</pre></div>
</div>
</div>
</div>
<p>In the following figure, the arrows show how you could read these values from the CDF.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cdf_age</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>

<span class="n">x</span> <span class="o">=</span> <span class="mi">17</span>
<span class="n">draw_line</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">q1</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
<span class="n">draw_arrow_down</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">q1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

<span class="n">draw_line</span><span class="p">(</span><span class="n">p2</span><span class="p">,</span> <span class="n">q2</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
<span class="n">draw_arrow_down</span><span class="p">(</span><span class="n">p2</span><span class="p">,</span> <span class="n">q2</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Age (years)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">91</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;CDF&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Distribution of age&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/08_distributions_79_0.png" src="_images/08_distributions_79_0.png" />
</div>
</div>
<p>The distance from the 25th to the 75th percentile is called the <strong>interquartile range</strong>, or IQR.  It measures the spread of the distribution, so it is similar to standard deviation or variance.</p>
<p>Because it is based on percentiles, it doesn’t get thrown off by extreme values or outliers, the way standard deviation does.  So IQR is more <strong>robust</strong> than variance, which means it works well even if there are errors in the data or extreme values.</p>
<p><strong>Exercise:</strong>  Using <code class="docutils literal notranslate"><span class="pre">cdf_age</span></code>, compute the fraction of the respondents in the GSS dataset that are <em>older</em> than 65.</p>
<p><strong>Exercise:</strong> The distribution of income in almost every country is long-tailed, which means there are a small number of people with very high incomes.
In the GSS dataset, the column <code class="docutils literal notranslate"><span class="pre">REALINC</span></code> represents total household income, converted to 1986 dollars.  We can get a sense of the shape of this distribution by plotting the CDF.</p>
<p>Select <code class="docutils literal notranslate"><span class="pre">REALINC</span></code> from the <code class="docutils literal notranslate"><span class="pre">gss</span></code> dataset, make a <code class="docutils literal notranslate"><span class="pre">Cdf</span></code> called <code class="docutils literal notranslate"><span class="pre">cdf_income</span></code>, and plot it.  Remember to label the axes!</p>
</div>
<div class="section" id="comparing-distributions">
<h2>Comparing distributions<a class="headerlink" href="#comparing-distributions" title="Permalink to this headline">¶</a></h2>
<p>So far we’ve seen two ways to represent distributions, PMFs and CDFs.  Now we’ll use PMFs and CDFs to compare distributions, and we’ll see the pros and cons of each.</p>
<p>One way to compare distributions is to plot multiple PMFs on the same axes.  For example, suppose we want to compare the distribution of age for male and female respondents.</p>
<p>First I’ll create a Boolean Series that’s true for male respondents.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">male</span> <span class="o">=</span> <span class="p">(</span><span class="n">gss</span><span class="p">[</span><span class="s1">&#39;SEX&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>And another that’s true for female respondents.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">female</span> <span class="o">=</span> <span class="p">(</span><span class="n">gss</span><span class="p">[</span><span class="s1">&#39;SEX&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Now I can select ages for the male and female respondents.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">male_age</span> <span class="o">=</span> <span class="n">age</span><span class="p">[</span><span class="n">male</span><span class="p">]</span>
<span class="n">female_age</span> <span class="o">=</span> <span class="n">age</span><span class="p">[</span><span class="n">female</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>And plot a Pmf for each.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pmf_male_age</span> <span class="o">=</span> <span class="n">Pmf</span><span class="o">.</span><span class="n">from_seq</span><span class="p">(</span><span class="n">male_age</span><span class="p">)</span>
<span class="n">pmf_male_age</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;Male&#39;</span><span class="p">)</span>

<span class="n">pmf_female_age</span> <span class="o">=</span> <span class="n">Pmf</span><span class="o">.</span><span class="n">from_seq</span><span class="p">(</span><span class="n">female_age</span><span class="p">)</span>
<span class="n">pmf_female_age</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;Female&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Age (years)&#39;</span><span class="p">)</span> 
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;PMF&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Distribution of age by sex&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/08_distributions_92_0.png" src="_images/08_distributions_92_0.png" />
</div>
</div>
<p>The plot is pretty noisy.
In the range from 40 to 50, it looks like the PMF is higher for men.
And from 70 to 80, it is higher for women.
But both of those differences might be due to random variation.</p>
<p>Now let’s do the same thing with CDFs; everything is the same except we replace <code class="docutils literal notranslate"><span class="pre">Pmf</span></code> with <code class="docutils literal notranslate"><span class="pre">Cdf</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cdf_male_age</span> <span class="o">=</span> <span class="n">Cdf</span><span class="o">.</span><span class="n">from_seq</span><span class="p">(</span><span class="n">male_age</span><span class="p">)</span>
<span class="n">cdf_male_age</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;Male&#39;</span><span class="p">)</span>

<span class="n">cdf_female_age</span> <span class="o">=</span> <span class="n">Cdf</span><span class="o">.</span><span class="n">from_seq</span><span class="p">(</span><span class="n">female_age</span><span class="p">)</span>
<span class="n">cdf_female_age</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;Female&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Age (years)&#39;</span><span class="p">)</span> 
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;CDF&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Distribution of age by sex&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/08_distributions_94_0.png" src="_images/08_distributions_94_0.png" />
</div>
</div>
<p>In general, CDFs are smoother than PMFs.  Because they smooth out randomness, we can often get a better view of real differences between distributions.</p>
<p>In this case, the lines are close together until age 40; after that, the CDF is higher for men than women.
So what does that mean?</p>
<p>One way to interpret the difference is that the fraction of men below a given age is generally more than the fraction of women below the same age.
For example, about 79% of men are 60 or less, compared to 76% of women.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cdf_male_age</span><span class="p">(</span><span class="mi">60</span><span class="p">),</span> <span class="n">cdf_female_age</span><span class="p">(</span><span class="mi">60</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(array(0.78599958), array(0.75529908))
</pre></div>
</div>
</div>
</div>
<p>Going the other way, we could also compare percentiles.
For example, the median age woman is older than the median age man, by about one year.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cdf_male_age</span><span class="o">.</span><span class="n">inverse</span><span class="p">(</span><span class="mf">0.5</span><span class="p">),</span> <span class="n">cdf_female_age</span><span class="o">.</span><span class="n">inverse</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(array(43.), array(44.))
</pre></div>
</div>
</div>
</div>
<p><strong>Exercise:</strong> What fraction of men are over 80?  What fraction of women?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="mi">1</span><span class="o">-</span><span class="n">cdf_male_age</span><span class="p">(</span><span class="mi">80</span><span class="p">),</span> <span class="mi">1</span><span class="o">-</span><span class="n">cdf_female_age</span><span class="p">(</span><span class="mi">80</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(0.0258566323313012, 0.03806458772611254)
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="income">
<h2>Income<a class="headerlink" href="#income" title="Permalink to this headline">¶</a></h2>
<p>As another example, let’s look at household income and compare the distribution before and after 1995 (I chose 1995 because it’s roughly the midpoint of the survey).
The variable <code class="docutils literal notranslate"><span class="pre">REALINC</span></code> represents household income in 1986 dollars.</p>
<p>I’ll make a Boolean <code class="docutils literal notranslate"><span class="pre">Series</span></code> to select respondents interviewed before and after 1995.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pre95</span> <span class="o">=</span> <span class="p">(</span><span class="n">gss</span><span class="p">[</span><span class="s1">&#39;YEAR&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">1995</span><span class="p">)</span>
<span class="n">post95</span> <span class="o">=</span> <span class="p">(</span><span class="n">gss</span><span class="p">[</span><span class="s1">&#39;YEAR&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">1995</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Now we can plot the PMFs.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">income</span> <span class="o">=</span> <span class="n">gss</span><span class="p">[</span><span class="s1">&#39;REALINC&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span>

<span class="n">Pmf</span><span class="o">.</span><span class="n">from_seq</span><span class="p">(</span><span class="n">income</span><span class="p">[</span><span class="n">pre95</span><span class="p">])</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;Before 1995&#39;</span><span class="p">)</span>
<span class="n">Pmf</span><span class="o">.</span><span class="n">from_seq</span><span class="p">(</span><span class="n">income</span><span class="p">[</span><span class="n">post95</span><span class="p">])</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;After 1995&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Income (1986 USD)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;PMF&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Distribution of income&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/08_distributions_104_0.png" src="_images/08_distributions_104_0.png" />
</div>
</div>
<p>There are a lot of unique values in this distribution, and none of them appear very often.  As a result, the PMF is so noisy and we can’t really see the shape of the distribution.</p>
<p>It’s also hard to compare the distributions.
It looks like there are more people with high incomes after 1995, but it’s hard to tell.  We can get a clearer picture with a CDF.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Cdf</span><span class="o">.</span><span class="n">from_seq</span><span class="p">(</span><span class="n">income</span><span class="p">[</span><span class="n">pre95</span><span class="p">])</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;Before 1995&#39;</span><span class="p">)</span>
<span class="n">Cdf</span><span class="o">.</span><span class="n">from_seq</span><span class="p">(</span><span class="n">income</span><span class="p">[</span><span class="n">post95</span><span class="p">])</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;After 1995&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Income (1986 USD)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;CDF&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Distribution of income&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/08_distributions_106_0.png" src="_images/08_distributions_106_0.png" />
</div>
</div>
<p>Below $30,000 the CDFs are almost identical; above that, we can see that the post-1995 distribution is shifted to the right.
In other words, the fraction of people with high incomes is about the same, but the income of high earners has increased.</p>
<p>In general, I recommend CDFs for exploratory analysis.  They give you a clear view of the distribution, without too much noise, and they are good for comparing distributions, especially if you have more than two.</p>
<p><strong>Exercise:</strong> In the previous figure, the dollar amounts are big enough that the labels on the <code class="docutils literal notranslate"><span class="pre">x</span></code> axis are crowded.  Improve the figure by expressing income in 1000s of dollars (and update the <code class="docutils literal notranslate"><span class="pre">x</span></code> label accordingly).</p>
<p><strong>Exercise:</strong> Let’s compare incomes for different levels of education in the GSS dataset</p>
<p>To do that we’ll create Boolean Series to identify respondents with different levels of education.</p>
<ul class="simple">
<li><p>In the U.S, 12 years of education usually means the respondent has completed high school (secondary education).</p></li>
<li><p>A respondent with 14 years of education has probably completed an associate degree (two years of college)</p></li>
<li><p>Someone with 16 years has probably completed a bachelor’s degree (four years of college or university).</p></li>
</ul>
<p>Define Boolean <code class="docutils literal notranslate"><span class="pre">Series</span></code> named <code class="docutils literal notranslate"><span class="pre">high</span></code>, <code class="docutils literal notranslate"><span class="pre">assc</span></code>, and <code class="docutils literal notranslate"><span class="pre">bach</span></code> that are true for respondents with</p>
<ul class="simple">
<li><p>12 or fewer years of education,</p></li>
<li><p>13, 14, or 15 years, and</p></li>
<li><p>16 or more.</p></li>
</ul>
<p>Compute and plot the distribution of income for each group.  Remember to label the CDFs, display a legend, and label the axes.</p>
<p>Write a few sentences that describe and interpret the results.</p>
</div>
<div class="section" id="modeling-distributions">
<h2>Modeling distributions<a class="headerlink" href="#modeling-distributions" title="Permalink to this headline">¶</a></h2>
<p>Some distributions have names.  For example, you have probably heard of the normal distribution, also called the Gaussian distribution.  And you might have heard of others like the exponential distribution, binomial distribution, or maybe Poisson distribution.</p>
<p>These “distributions with names” are called <strong>analytic</strong> because they are described by analytic mathematical functions, as contrasted with empirical distributions, which are based on data.</p>
<p>It turns out that many things we measure in the world have distributions that are well approximated by analytic distributions, so these distributions are sometimes good models for the real world.<br />
In this context, what I mean by a “model” is a simplified description of the world that is accurate enough for its intended purpose.</p>
<p>In this section, we’ll compute the CDF of a normal distribution and compare it to an empirical distribution of data.
But before we get to real data, we’ll start with fake data.</p>
<p>The following statement uses NumPy’s <code class="docutils literal notranslate"><span class="pre">random</span></code> library to generate 1000 values from a normal distribution with mean <code class="docutils literal notranslate"><span class="pre">0</span></code> and standard deviation <code class="docutils literal notranslate"><span class="pre">1</span></code>.</p>
<div class="cell tag_hide-cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">17</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sample</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Here’s what the empirical distribution of the sample looks like.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cdf_sample</span> <span class="o">=</span> <span class="n">Cdf</span><span class="o">.</span><span class="n">from_seq</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span>
<span class="n">cdf_sample</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;Random sample&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;CDF&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/08_distributions_117_0.png" src="_images/08_distributions_117_0.png" />
</div>
</div>
<p>If we did not know that this sample was drawn from a normal distribution, and we wanted to check, we could compare the CDF of the data to the CDF of an ideal normal distribution, which we can use the SciPy library to compute.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">scipy.stats</span> <span class="kn">import</span> <span class="n">norm</span>

<span class="n">xs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">ys</span> <span class="o">=</span> <span class="n">norm</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">cdf</span><span class="p">(</span><span class="n">xs</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>First we import <code class="docutils literal notranslate"><span class="pre">norm</span></code> from <code class="docutils literal notranslate"><span class="pre">scipy.stats</span></code>, which is a collection of functions related to statistics.</p>
<p>Then we use <code class="docutils literal notranslate"><span class="pre">linspace()</span></code> to create an array of equally-spaced points from -3 to 3; those are the <code class="docutils literal notranslate"><span class="pre">x</span></code> values where we will evaluate the normal CDF.</p>
<p>Next, <code class="docutils literal notranslate"><span class="pre">norm(0,</span> <span class="pre">1)</span></code> creates an object that represents a normal distribution with mean <code class="docutils literal notranslate"><span class="pre">0</span></code> and standard deviation <code class="docutils literal notranslate"><span class="pre">1</span></code>.</p>
<p>Finally, <code class="docutils literal notranslate"><span class="pre">cdf</span></code> computes the CDF of the normal distribution, evaluated at each of the <code class="docutils literal notranslate"><span class="pre">xs</span></code>.</p>
<p>I’ll plot the normal CDF with a gray line and then plot the CDF of the data again.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">xs</span><span class="p">,</span> <span class="n">ys</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Normal CDF&#39;</span><span class="p">)</span>
<span class="n">cdf_sample</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;Random sample&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;CDF&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/08_distributions_121_0.png" src="_images/08_distributions_121_0.png" />
</div>
</div>
<p>The CDF of the random sample agrees with the normal model.
And that’s not surprising because the data were actually sampled from a normal distribution.
When we collect data in the real world, we do not expect it to fit a normal distribution as well as this.  In the next exercise, we’ll try it and see.</p>
<p><strong>Exercise:</strong> Is the normal distribution a good model for the distribution of ages in the U.S. population?</p>
<p>To answer this question:</p>
<ul class="simple">
<li><p>Compute the mean and standard deviation of ages in the GSS dataset.</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">linspace</span></code> to create an array of equally spaced values between 18 and 89.</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">norm</span></code> to create a normal distribution with the same mean and standard deviation as the data, then use it to compute the normal CDF for each value in the array.</p></li>
<li><p>Plot the normal CDF with a gray line.</p></li>
<li><p>Plot the CDF of the ages in the GSS.</p></li>
</ul>
<p>How well do the plotted CDFs agree?</p>
<p><strong>Exercise:</strong> In many datasets, the distribution of income is approximately <strong>lognormal</strong>, which means that the logarithms of the incomes fit a normal distribution.  We’ll see whether that’s true for the GSS data.</p>
<ul class="simple">
<li><p>Extract <code class="docutils literal notranslate"><span class="pre">REALINC</span></code> from <code class="docutils literal notranslate"><span class="pre">gss</span></code> and compute its logarithm using <code class="docutils literal notranslate"><span class="pre">np.log10()</span></code>.  Hint: Replace the value <code class="docutils literal notranslate"><span class="pre">0</span></code> with <code class="docutils literal notranslate"><span class="pre">NaN</span></code> before computing logarithms.</p></li>
<li><p>Compute the mean and standard deviation of the log-transformed incomes.</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">norm</span></code> to make a normal distribution with the same mean and standard deviation as the log-transformed incomes.</p></li>
<li><p>Plot the CDF of the normal distribution.</p></li>
<li><p>Compute and plot the CDF of the log-transformed incomes.</p></li>
</ul>
<p>How similar are the CDFs of the log-transformed incomes and the normal distribution?</p>
</div>
<div class="section" id="probability-density-functions">
<h2>Probability Density Functions<a class="headerlink" href="#probability-density-functions" title="Permalink to this headline">¶</a></h2>
<p>We have seen two ways to represent distributions, PMFs and CDFs.  Now we’ll learn another way: a probability density function, or PDF.</p>
<p><code class="docutils literal notranslate"><span class="pre">norm</span></code>, which we used to compute the normal CDF, can also compute the normal PDF:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">xs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">ys</span> <span class="o">=</span> <span class="n">norm</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">pdf</span><span class="p">(</span><span class="n">xs</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">xs</span><span class="p">,</span> <span class="n">ys</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Normal PDF&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;PDF&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Normal density function&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/08_distributions_129_0.png" src="_images/08_distributions_129_0.png" />
</div>
</div>
<p>The normal PDF is the classic “bell curve”.</p>
<p>It is tempting to compare the PMF of the data to the PDF of the normal distribution, but that doesn’t work.
Let’s see what happens if we try:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">xs</span><span class="p">,</span> <span class="n">ys</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Normal PDF&#39;</span><span class="p">)</span>

<span class="n">pmf_sample</span> <span class="o">=</span> <span class="n">Pmf</span><span class="o">.</span><span class="n">from_seq</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span>
<span class="n">pmf_sample</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;Random sample&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;PDF&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Normal density function&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/08_distributions_131_0.png" src="_images/08_distributions_131_0.png" />
</div>
</div>
<p>The PMF of the sample is a flat line across the bottom.  In the random sample, every value is unique, so they all have the same probability, one in 1000.</p>
<p>However, we can use the points in the sample to estimate the PDF of the distribution they came from.
This process is called <strong>kernel density estimation</strong>, or KDE.  It’s a way of getting from a PMF, a probability mass function, to a PDF, a probability density function.</p>
<p>To generate a KDE plot, we’ll use the Seaborn library, which I’ll import as <code class="docutils literal notranslate"><span class="pre">sns</span></code>.
Seaborn provides <code class="docutils literal notranslate"><span class="pre">kdeplot</span></code>, which takes the sample, estimates the PDF, and plots it.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>

<span class="n">sns</span><span class="o">.</span><span class="n">kdeplot</span><span class="p">(</span><span class="n">sample</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Estimated sample PDF&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;PDF&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Normal density function&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/08_distributions_133_0.png" src="_images/08_distributions_133_0.png" />
</div>
</div>
<p>Now we can compare the KDE plot and the normal PDF.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">xs</span><span class="p">,</span> <span class="n">ys</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Normal PDF&#39;</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">kdeplot</span><span class="p">(</span><span class="n">sample</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Estimated sample PDF&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;PDF&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Normal density function&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/08_distributions_135_0.png" src="_images/08_distributions_135_0.png" />
</div>
</div>
<p>The KDE plot matches the normal PDF pretty well, although the differences look bigger when we compare PDFs than they did with the CDFs.
That means that the PDF is a more sensitive way to look for differences, but often it is too sensitive.<br />
It’s hard to tell whether apparent differences mean anything, or if they are just random, as in this case.</p>
<p><strong>Exercise:</strong> In a previous exercise, we asked “Is the normal distribution a good model for the distribution of ages in the U.S. population?”  To answer this question, we plotted the CDF of the data and compared it to the CDF of a normal distribution with the same mean and standard deviation.</p>
<p>Now we’ll compare the estimated density of the data with the normal PDF.</p>
<ul class="simple">
<li><p>Again, compute the mean and standard deviation of ages in the GSS dataset.</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">linspace</span></code> to create an array of values between 18 and 89.</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">norm</span></code> to create a normal distribution with the same mean and standard deviation as the data, then use it to compute the normal PDF for each value in the array.</p></li>
<li><p>Plot the normal PDF with a gray line.</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">sns.kdeplot</span></code> to estimate and plot the density of the ages in the GSS.</p></li>
</ul>
<p>Note: Seaborn can’t handle NaNs, so use <code class="docutils literal notranslate"><span class="pre">dropna</span></code> to drop them before calling <code class="docutils literal notranslate"><span class="pre">kdeplot</span></code>.</p>
<p>How well do the PDF and KDE plots agree?</p>
<p><strong>Exercise:</strong> In a previous exercise, we used CDFs to see if the distribution of income fits a lognormal distribution.  We can make the same comparison using a PDF and KDE.</p>
<ul class="simple">
<li><p>Again, extract <code class="docutils literal notranslate"><span class="pre">REALINC</span></code> from <code class="docutils literal notranslate"><span class="pre">gss</span></code> and compute its logarithm using <code class="docutils literal notranslate"><span class="pre">np.log10()</span></code>.</p></li>
<li><p>Compute the mean and standard deviation of the log-transformed incomes.</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">norm</span></code> to make a normal distribution with the same mean and standard deviation as the log-transformed incomes.</p></li>
<li><p>Plot the PDF of the normal distribution.</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">sns.kdeplot()</span></code> to estimate and plot the density of the log-transformed incomes.</p></li>
</ul>
</div>
<div class="section" id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>In this chapter, we’ve seen three ways to visualize distributions, PMFs, CDFs, and KDE.</p>
<p>In general, I use CDFs when I am exploring data.  That way, I get the best view of what’s going on without getting distracted by noise.</p>
<p>Then, if I am presenting results to an audience unfamiliar with CDFs, I might use a PMF if the dataset contains a small number of unique values, or KDE if there are many unique values.</p>
<p>As an example, see <a class="reference external" href="https://towardsdatascience.com/the-inspection-paradox-is-everywhere-2ef1c2e9d709">this article about the Inspection Paradox</a>.
I wrote it for a general audience, so I use KDE to present and compare distributions.</p>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        
    <a class='left-prev' id="prev-link" href="07_dataframes.html" title="previous page">Dataframes and Series</a>
    <a class='right-next' id="next-link" href="09_relationships.html" title="next page">Relationships</a>

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Allen B. Downey<br/>
        
            &copy; Copyright 2020.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    
  <script src="_static/js/index.d3f166471bb80abb5163.js"></script>


    
  </body>
</html>