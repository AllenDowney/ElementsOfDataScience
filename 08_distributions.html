
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Distributions &#8212; Elements of Data Science</title>
    
  <link rel="stylesheet" href="_static/css/index.f658d18f9b420779cfdf24aa0a7e2d77.css">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/sphinx-book-theme.40e2e510f6b7d1648584402491bb10fe.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="_static/js/index.d3f166471bb80abb5163.js">

    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/togglebutton.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/sphinx-book-theme.d31b09fe5c1d09cb49b26a786de4a05d.js"></script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Relationships" href="09_relationships.html" />
    <link rel="prev" title="Dataframes" href="07_dataframes.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="index.html">
  
  
  <h1 class="site-logo" id="site-title">Elements of Data Science</h1>
  
</a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>
<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="index.html">
   The notebooks
  </a>
 </li>
</ul>
<ul class="current nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="01_variables.html">
   Variables and values
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="02_times.html">
   Times and places
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="03_arrays.html">
   Lists and arrays
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="04_loops.html">
   Loops and files
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="05_dictionaries.html">
   Dictionaries
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="06_plotting.html">
   Plotting
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="07_dataframes.html">
   Dataframes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="07_dataframes.html#dataframes-and-series">
   DataFrames and Series
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Distributions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="09_relationships.html">
   Relationships
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="10_regression.html">
   Regression
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="11_inference.html">
   Inference
  </a>
 </li>
</ul>

</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="_sources/08_distributions.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

        <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/AllenDowney/ElementsOfDataScience"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        
        
    </div>
</div>


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
                title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/AllenDowney/ElementsOfDataScience/master?urlpath=tree/08_distributions.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

    </div>

    <!-- Table of contents -->
    <div class="d-none d-md-block col-md-2 bd-toc show">
        
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> Contents
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#goals">
   Goals
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id1">
   Distributions
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#the-general-social-survey">
   The General Social Survey
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#probability-mass-functions">
   Probability mass functions
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#cumulative-distribution-functions">
   Cumulative distribution functions
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#comparing-distributions">
   Comparing distributions
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#income">
   Income
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#modeling-distributions">
   Modeling distributions
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#probability-distribution-functions">
   Probability distribution functions
  </a>
 </li>
</ul>

        </nav>
        
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="distributions">
<h1>Distributions<a class="headerlink" href="#distributions" title="Permalink to this headline">¶</a></h1>
<p>Elements of Data Science</p>
<p>by <a class="reference external" href="https://allendowney.com">Allen Downey</a></p>
<p><a class="reference external" href="https://opensource.org/licenses/MIT">MIT License</a></p>
<div class="section" id="goals">
<h2>Goals<a class="headerlink" href="#goals" title="Permalink to this headline">¶</a></h2>
<p>In this noteboook we’ll see three ways to describe a set of values:</p>
<ul class="simple">
<li><p>A probability mass function (PMF), which represents a set of values and the number of times each one appears in a dataset.</p></li>
<li><p>A cumulative distribution function (CDF), which contains the same information as a PMF in a form that makes it easier to visualize, compare distributions, and perform some computations.</p></li>
<li><p>A kernel density estimate (KDE), which is like a smooth, continuous version of a histogram.</p></li>
</ul>
<p>We will also see ways to compare distributions and compare real data to a mathematical model.</p>
<p>For examples, we’ll use data from the General Social Survey (GSS) to look at distributions of age and income, and to explore the relationship between income and education.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Get the data file</span>

<span class="kn">import</span> <span class="nn">os</span>

<span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s1">&#39;gss.hdf5&#39;</span><span class="p">):</span>
    <span class="o">!</span>wget https://github.com/AllenDowney/ElementsOfDataScience/raw/master/gss.hdf5
</pre></div>
</div>
</div>
</div>
<p>The following cell installs one of the libraries we will use in this notebook, <code class="docutils literal notranslate"><span class="pre">empiricaldist</span></code>.  The details are not important, but if you are curious:</p>
<ul class="simple">
<li><p>It uses the <code class="docutils literal notranslate"><span class="pre">sys</span></code> library to check whether this notebook is running on Colab.</p></li>
<li><p>It uses <code class="docutils literal notranslate"><span class="pre">pip</span></code> to install the library.  <code class="docutils literal notranslate"><span class="pre">pip</span></code> is not part of the Python language; the <code class="docutils literal notranslate"><span class="pre">!</span></code> indicates that it is a “shell command”.</p></li>
</ul>
<p>If you are running in another Jupyter environment, you will have to make sure that this library is installed.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># If we&#39;re running on Colab, install empiricaldist</span>
<span class="c1"># https://pypi.org/project/empiricaldist/</span>

<span class="kn">import</span> <span class="nn">sys</span>
<span class="n">IN_COLAB</span> <span class="o">=</span> <span class="s1">&#39;google.colab&#39;</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">modules</span>

<span class="k">if</span> <span class="n">IN_COLAB</span><span class="p">:</span>
    <span class="o">!</span>pip install empiricaldist
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="id1">
<h2>Distributions<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>A distribution is a set of values and their corresponding probabilities.  For example, if you roll a six-sided die, there are six possible outcomes, the number 1 through 6, and they all have the same probability, 1/6.</p>
<p>We can represent the distribution of outcomes with a table, like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Value</span>        <span class="n">Probability</span>
<span class="mi">1</span>            <span class="mi">1</span><span class="o">/</span><span class="mi">6</span>
<span class="mi">2</span>            <span class="mi">1</span><span class="o">/</span><span class="mi">6</span>
<span class="mi">3</span>            <span class="mi">1</span><span class="o">/</span><span class="mi">6</span>
<span class="mi">4</span>            <span class="mi">1</span><span class="o">/</span><span class="mi">6</span>
<span class="mi">5</span>            <span class="mi">1</span><span class="o">/</span><span class="mi">6</span>
<span class="mi">6</span>            <span class="mi">1</span><span class="o">/</span><span class="mi">6</span>
</pre></div>
</div>
<p>More generally, there can be any number of values, the values can be any type, and the probabilities do not have to be equal.</p>
<p>In this notebook, we explore distributions of age, income, and other quantities.  We’ll see two ways to represent distributions, PMFs and CDFs, and several ways to visualize them.</p>
</div>
<div class="section" id="the-general-social-survey">
<h2>The General Social Survey<a class="headerlink" href="#the-general-social-survey" title="Permalink to this headline">¶</a></h2>
<p>In this notebook we’ll work with a new dataset, the General Social Survey.</p>
<p>The General Social Survey, or GSS, has run annually since 1972; it surveys a representative sample of the adult population in the U.S. and asks questions about demographics and beliefs about social and political issues.</p>
<p>It is widely used by politicians, policy makers, and researchers, including me.</p>
<p>The GSS dataset contains hundreds of columns; I’ve selected just a few.  And I have already cleaned and validated them, so we just have to read the file, like this.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">gss</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_hdf</span><span class="p">(</span><span class="s1">&#39;gss.hdf5&#39;</span><span class="p">,</span> <span class="s1">&#39;gss&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>If you run <code class="docutils literal notranslate"><span class="pre">gss.head()</span></code>, you can see the first few rows.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">gss</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="probability-mass-functions">
<h2>Probability mass functions<a class="headerlink" href="#probability-mass-functions" title="Permalink to this headline">¶</a></h2>
<p>To get started with this dataset, let’s look at the distribution of <code class="docutils literal notranslate"><span class="pre">educ</span></code>, which records the number of years of education for each respondent.  First I’ll select a column from the DataFrame.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">educ</span> <span class="o">=</span> <span class="n">gss</span><span class="p">[</span><span class="s1">&#39;educ&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>We’ve already seen one way to visualize a distribution, a histogram.  Here’s the histogram of education level.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">educ</span><span class="o">.</span><span class="n">dropna</span><span class="p">())</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Years of education&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Number of respondents&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Histogram of education level&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<p>Notice that we use <code class="docutils literal notranslate"><span class="pre">dropna</span></code> to drop NaNs from <code class="docutils literal notranslate"><span class="pre">educ</span></code> before we pass it to <code class="docutils literal notranslate"><span class="pre">hist</span></code>.</p>
<p>Based on the histogram, we can see the general shape of the distribution and the central tendency – it looks like the peak is near 12 years of education.</p>
<p>But a histogram is not the best way to visualize this distribution.</p>
<p>An alternative is a “probability mass function”, or PMF, that contains the unique values in the dataset and how often each one appears.</p>
<p>To represent a PMF, we’ll use a library called <code class="docutils literal notranslate"><span class="pre">empiricaldist</span></code>, which provides a type called <code class="docutils literal notranslate"><span class="pre">Pmf</span></code>.  Notice the difference in capitalization: PMF is a mathematical concept, and <code class="docutils literal notranslate"><span class="pre">Pmf</span></code> is a type.</p>
<p>To import it, I’ll use a version of the <code class="docutils literal notranslate"><span class="pre">import</span></code> statement we have not seen before.  The following statement imports only the <code class="docutils literal notranslate"><span class="pre">Pmf</span></code> type from the <code class="docutils literal notranslate"><span class="pre">empiricaldist</span></code> library.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">empiricaldist</span> <span class="kn">import</span> <span class="n">Pmf</span>
</pre></div>
</div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">Pmf</span></code> provides a function called <code class="docutils literal notranslate"><span class="pre">from_seq</span></code> that takes any kind of sequence – like a list, tuple, or Pandas Series – and computes the PMF of the values in the sequence.</p>
<p>The result is a <code class="docutils literal notranslate"><span class="pre">Pmf</span></code> value, which is actually a specialized type of Pandas Series.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pmf_educ</span> <span class="o">=</span> <span class="n">Pmf</span><span class="o">.</span><span class="n">from_seq</span><span class="p">(</span><span class="n">educ</span><span class="p">,</span> <span class="n">normalize</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="nb">type</span><span class="p">(</span><span class="n">pmf_educ</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>The keyword argument <code class="docutils literal notranslate"><span class="pre">normalize=False</span></code> indicates that we don’t want to normalize this PMF.  I’ll explain what that means soon.</p>
<p>Here’s what the first and last few rows of the <code class="docutils literal notranslate"><span class="pre">Pmf</span></code> look like.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pmf_educ</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pmf_educ</span><span class="o">.</span><span class="n">tail</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>The left column is the set of possible values; in this example it’s the reported number of years of school.</p>
<p>The right column is the number of times each value appears in the sequences, which is the number of respondents who reported each value.</p>
<p>In this dataset, there are 7953 respondents who report that they have 16 years of formal education, which probably means they completed college.</p>
<p>You can use the bracket operator to look up a value in a Pmf and get the corresponding count:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pmf_educ</span><span class="p">[</span><span class="mi">16</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>Usually when we make a PMF, we want to know the <em>fraction</em> of respondents with each value, rather than the counts.  We can do that by setting <code class="docutils literal notranslate"><span class="pre">normalize=True</span></code>; then we get a normalized PMF, that is, a PMF where the values in the second column add up to 1.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pmf_educ</span> <span class="o">=</span> <span class="n">Pmf</span><span class="o">.</span><span class="n">from_seq</span><span class="p">(</span><span class="n">educ</span><span class="p">,</span> <span class="n">normalize</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">pmf_educ</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>Now if we use the bracket operator, the result is a fraction.</p>
<p>For example, the fraction of people with 12 years of education is a little more than 30%:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pmf_educ</span><span class="p">[</span><span class="mi">12</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>Each <code class="docutils literal notranslate"><span class="pre">Pmf</span></code> value provides a <code class="docutils literal notranslate"><span class="pre">.bar()</span></code> method that plots a PMF as a bar chart.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pmf_educ</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;educ&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Years of education&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;PMF&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Distribution of years of education&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">();</span>
</pre></div>
</div>
</div>
</div>
<p>In this figure, we can see that the most common value is 12 years, but there are also peaks at 14 and 16, which correspond to two and four years of college.</p>
<p>For this data, the PMF is probably a better choice than the histogram.  The PMF shows all unique values, so we can see where the peaks are.</p>
<p>Because the histogram puts values into bins, it obscures some details.  With this dataset, and the default number of bins, we couldn’t see the peaks at 14 and 16 years.</p>
<p>PMFs have limitations, too, as we’ll see.  But first, let’s get some practice with PMFs.</p>
<p><strong>Exercise:</strong> Let’s look at another column in this DataFrame, <code class="docutils literal notranslate"><span class="pre">year</span></code>, which represents the year each respondent was interviewed.</p>
<p>Make an unnormalized PMF for <code class="docutils literal notranslate"><span class="pre">year</span></code> and display the result.
How many respondents were interviewed in 2016?</p>
<p><strong>Exercise:</strong> Now let’s plot a PMF for the age of the respondents in the GSS dataset.  The column <code class="docutils literal notranslate"><span class="pre">age</span></code> contains respondents’ age in years.</p>
<p>Make a normalized PMF of <code class="docutils literal notranslate"><span class="pre">age</span></code> and plot it as a bar chart.</p>
</div>
<div class="section" id="cumulative-distribution-functions">
<h2>Cumulative distribution functions<a class="headerlink" href="#cumulative-distribution-functions" title="Permalink to this headline">¶</a></h2>
<p>Now we’ll see another way to represent a distribution, the cumulative distribution function, or CDF.</p>
<p>CDFs are useful for some computations; they are also a great way to visualize and compare distributions.</p>
<p>A PMF tells you – if you draw a random value from a distribution – what’s the chance of getting <code class="docutils literal notranslate"><span class="pre">x</span></code>, for any given value of <code class="docutils literal notranslate"><span class="pre">x</span></code>.</p>
<p>The CDF is similar; if you draw a random value from a distribution, it tells you the chance of getting a value less than or equal to <code class="docutils literal notranslate"><span class="pre">x</span></code>.</p>
<p>As an small example, suppose the distribution only has 5 elements: 1, 2, 2, 3, and 5.  The following table shows the PMF:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Value</span>      <span class="n">Probability</span>
<span class="mi">1</span>          <span class="mi">1</span><span class="o">/</span><span class="mi">5</span>
<span class="mi">2</span>          <span class="mi">2</span><span class="o">/</span><span class="mi">5</span>
<span class="mi">3</span>          <span class="mi">1</span><span class="o">/</span><span class="mi">5</span>
<span class="mi">5</span>          <span class="mi">1</span><span class="o">/</span><span class="mi">5</span>

</pre></div>
</div>
<p>The PMF says that the probability of value 1 is 1/5; the probability of value 2 is 2/5, and the probabilities for 3 and 5 are 1/5.</p>
<p>The CDF is the cumulative sum of the probabilities from the PMF, shown in the following table:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Value</span>      <span class="n">Cumulative</span>
           <span class="n">Probability</span>
<span class="mi">1</span>          <span class="mi">1</span><span class="o">/</span><span class="mi">5</span>
<span class="mi">2</span>          <span class="mi">3</span><span class="o">/</span><span class="mi">5</span>
<span class="mi">3</span>          <span class="mi">4</span><span class="o">/</span><span class="mi">5</span>
<span class="mi">5</span>          <span class="mi">5</span><span class="o">/</span><span class="mi">5</span>

</pre></div>
</div>
<p>The CDF of 2 is three fifths, because three out of 5 values in the distribution are less than or equal to 2.</p>
<p>The CDF of 5 is 1, or 100%, because all of the values in the distribution are less than or equal to 5.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">empiricaldist</span></code> library provides a <code class="docutils literal notranslate"><span class="pre">Cdf</span></code> type which is similar to the <code class="docutils literal notranslate"><span class="pre">Pmf</span></code> type we’ve seen, and we can import it the same way.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">empiricaldist</span> <span class="kn">import</span> <span class="n">Cdf</span>
</pre></div>
</div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">Cdf</span></code> provides a function called <code class="docutils literal notranslate"><span class="pre">from_seq</span></code> that takes any kind of sequence and returns a new <code class="docutils literal notranslate"><span class="pre">Cdf</span></code> value.</p>
<p>The following example computes the CDF of ages for respondents in the General Social Survey.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cdf_age</span> <span class="o">=</span> <span class="n">Cdf</span><span class="o">.</span><span class="n">from_seq</span><span class="p">(</span><span class="n">gss</span><span class="p">[</span><span class="s1">&#39;age&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<p>The result is a <code class="docutils literal notranslate"><span class="pre">Cdf</span></code> value we assign to <code class="docutils literal notranslate"><span class="pre">cdf_age</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">cdf_age</span></code> has a method called <code class="docutils literal notranslate"><span class="pre">plot</span></code> that plots the CDF as a line.  Here’s what it looks like.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cdf_age</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>

<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Age (years)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;CDF&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Distribution of age&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">x</span></code> axis is the ages, from 18 to 89.  The <code class="docutils literal notranslate"><span class="pre">y</span></code> axis is the cumulative probabilities, from 0 to 1.</p>
<p><code class="docutils literal notranslate"><span class="pre">cdf_age</span></code> can be used as a function, so if you give it an age, it returns the corresponding probability (in a NumPy array).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">q</span> <span class="o">=</span> <span class="mi">51</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">cdf_age</span><span class="p">(</span><span class="n">q</span><span class="p">)</span>
<span class="n">p</span>
</pre></div>
</div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">q</span></code> stands for “quantity”, which is what we are looking up.  <code class="docutils literal notranslate"><span class="pre">p</span></code> stands for probability, which is the result.</p>
<p>In this example, the quantity is age 51, and the corresponding probability is <code class="docutils literal notranslate"><span class="pre">p</span></code>, which is 0.66.</p>
<p>That means that about 66% of the respondents are 51 years old or younger.</p>
<p>The arrow in the following figure shows how you could read this value from the CDF, at least approximately.</p>
<p><img alt="" src="https://github.com/AllenDowney/ElementsOfDataScience/raw/master/figs/cdf_forward.png" /></p>
<p>The CDF is an invertible function, which means that if you have a probability, <code class="docutils literal notranslate"><span class="pre">p</span></code>, you can look up the corresponding quantity, <code class="docutils literal notranslate"><span class="pre">q</span></code>.</p>
<p>Here’s how:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="o">=</span> <span class="mf">0.25</span>
<span class="n">q</span> <span class="o">=</span> <span class="n">cdf_age</span><span class="o">.</span><span class="n">inverse</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
<span class="n">q</span>
</pre></div>
</div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">cdf_age</span></code> has a method called <code class="docutils literal notranslate"><span class="pre">inverse</span></code> that computes the inverse of the cumulative distribution function.</p>
<p>In this example, we look up the probability 0.25, which returns 30.</p>
<p>That means that 25% of the respondents are age 30 or less.  Another way to say the same thing is “age 30 is the 25th percentile of this distribution”.</p>
<p>If we look up probability 0.75, it returns 57, so 75% of the respondents are 57 or younger.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="o">=</span> <span class="mf">0.75</span>
<span class="n">q</span> <span class="o">=</span> <span class="n">cdf_age</span><span class="o">.</span><span class="n">inverse</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>In the following figure, the arrows show how you could read these values from the CDF.</p>
<p><img alt="" src="https://github.com/AllenDowney/ElementsOfDataScience/raw/master/figs/cdf_inverse.png" /></p>
<p>By the way, the distance from the 25th to the 75th percentile is called the “interquartile range”, or IQR.  It measures the spread of the distribution, so it is similar to standard deviation or variance.</p>
<p>Because it is based on percentiles, it doesn’t get thrown off by extreme values or outliers, the way standard deviation does.  So IQR is more “robust” than variance, which means it works well even if there are errors in the data or extreme values.</p>
<p><strong>Exercise:</strong>  Using <code class="docutils literal notranslate"><span class="pre">cdf_age</span></code>, compute the fraction of the respondents in the GSS dataset that are OLDER than 65.</p>
<p><strong>Exercise:</strong> The distribution of income in almost every country is long-tailed, which means there are a small number of people with very high incomes.</p>
<p>In the GSS dataset, the column <code class="docutils literal notranslate"><span class="pre">realinc</span></code> represents total household income, converted to 1986 dollars.  We can get a sense of the shape of this distribution by plotting the CDF.</p>
<p>Select <code class="docutils literal notranslate"><span class="pre">realinc</span></code> from the <code class="docutils literal notranslate"><span class="pre">gss</span></code> dataset, make a <code class="docutils literal notranslate"><span class="pre">Cdf</span></code> called <code class="docutils literal notranslate"><span class="pre">cdf_income</span></code>, and plot it.  Remember to label the axes!</p>
</div>
<div class="section" id="comparing-distributions">
<h2>Comparing distributions<a class="headerlink" href="#comparing-distributions" title="Permalink to this headline">¶</a></h2>
<p>So far we’ve seen two ways to represent distributions, PMFs and CDFs.  Now we’ll use PMFs and CDFs to compare distributions, and we’ll see the pros and cons of each.</p>
<p>One way to compare distributions is to plot multiple PMFs on the same axes.  For example, suppose we want to compare the distribution of age for male and female respondents.</p>
<p>First I’ll create a Boolean Series that’s true for male respondents.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">male</span> <span class="o">=</span> <span class="p">(</span><span class="n">gss</span><span class="p">[</span><span class="s1">&#39;sex&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>And another that’s true for female respondents.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">female</span> <span class="o">=</span> <span class="p">(</span><span class="n">gss</span><span class="p">[</span><span class="s1">&#39;sex&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>And I’ll extract the <code class="docutils literal notranslate"><span class="pre">age</span></code> column.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">age</span> <span class="o">=</span> <span class="n">gss</span><span class="p">[</span><span class="s1">&#39;age&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>Now I can select ages for the male and female respondents.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">male_age</span> <span class="o">=</span> <span class="n">age</span><span class="p">[</span><span class="n">male</span><span class="p">]</span>
<span class="n">female_age</span> <span class="o">=</span> <span class="n">age</span><span class="p">[</span><span class="n">female</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>And plot a Pmf for each.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Pmf</span><span class="o">.</span><span class="n">from_seq</span><span class="p">(</span><span class="n">male_age</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;Male&#39;</span><span class="p">)</span>
<span class="n">Pmf</span><span class="o">.</span><span class="n">from_seq</span><span class="p">(</span><span class="n">female_age</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;Female&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Age (years)&#39;</span><span class="p">)</span> 
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;PMF&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Distribution of age by sex&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">();</span>
</pre></div>
</div>
</div>
</div>
<p>It looks like there are more men in their twenties, maybe.  And there are more women in their 70s and 80s.</p>
<p>In between, the plot is pretty noisy; most of these differences are just random variations.</p>
<p>Now let’s do the same thing with CDFs; everything is the same except we replace <code class="docutils literal notranslate"><span class="pre">Pmf</span></code> with <code class="docutils literal notranslate"><span class="pre">Cdf</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Cdf</span><span class="o">.</span><span class="n">from_seq</span><span class="p">(</span><span class="n">male_age</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;Male&#39;</span><span class="p">)</span>
<span class="n">Cdf</span><span class="o">.</span><span class="n">from_seq</span><span class="p">(</span><span class="n">female_age</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;Female&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Age (years)&#39;</span><span class="p">)</span> 
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;CDF&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Distribution of age by sex&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">();</span>
</pre></div>
</div>
</div>
</div>
<p>In general, CDFs are smoother than PMFs.  Because they smooth out randomness, we can often get a better view of real differences between distributions.</p>
<p>In this case, the lines are close together over the whole range; that is, the distributions are nearly identical.</p>
<p>But we can see the blue line to the left of the orange line across the distribution, which we can think of two ways:</p>
<ul class="simple">
<li><p>Suppose there is a club called the “Under 25 Club”, where you have to be under 25 to get in.  A higher fraction of men would be able to get in, compared to the fraction of women.  But that doesn’t necessarily mean there would be more men; that depends on the proportions of men and women in the population.</p></li>
<li><p>Suppose there’s another club called the “25th Percentile Club”, where you have to be at or below the 25th percentile to get it.  The oldest eligible man would be a little younger than the oldest eligible woman.</p></li>
</ul>
<p>In this example, the difference between the distibutions is consistent over the range of ages.  So everything we said about the “Under 25 Club” and the “25th Percentile Club” would also be true for 30, or the 30th percentile, or any other age or percentile.</p>
</div>
<div class="section" id="income">
<h2>Income<a class="headerlink" href="#income" title="Permalink to this headline">¶</a></h2>
<p>As another example, let’s look at household income and compare the distribution before and after 1995 (I chose 1995 because it’s roughly the midpoint of the survey).</p>
<p>The variable <code class="docutils literal notranslate"><span class="pre">realinc</span></code> represents household income in 1986 dollars.</p>
<p>I’ll make a Boolean Series to select respondents interviewed before and after 1995.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pre95</span> <span class="o">=</span> <span class="p">(</span><span class="n">gss</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">1995</span><span class="p">)</span>
<span class="n">post95</span> <span class="o">=</span> <span class="p">(</span><span class="n">gss</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">1995</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Now we can plot the PMFs.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">income</span> <span class="o">=</span> <span class="n">gss</span><span class="p">[</span><span class="s1">&#39;realinc&#39;</span><span class="p">]</span>

<span class="n">Pmf</span><span class="o">.</span><span class="n">from_seq</span><span class="p">(</span><span class="n">income</span><span class="p">[</span><span class="n">pre95</span><span class="p">])</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;Before 1995&#39;</span><span class="p">)</span>
<span class="n">Pmf</span><span class="o">.</span><span class="n">from_seq</span><span class="p">(</span><span class="n">income</span><span class="p">[</span><span class="n">post95</span><span class="p">])</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;After 1995&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Income (1986 USD)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;PMF&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Distribution of income&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">();</span>
</pre></div>
</div>
</div>
</div>
<p>There are a lot of unique values in this distribution, and none of them appear very often.  As a result, the PMF is so noisy and we can’t really see the shape of the distribution.</p>
<p>It’s also hard to compare the distributions.
It looks like there are more people with high incomes after 1995, but it’s hard to tell.  We can get a clearer picture with a CDF.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Cdf</span><span class="o">.</span><span class="n">from_seq</span><span class="p">(</span><span class="n">income</span><span class="p">[</span><span class="n">pre95</span><span class="p">])</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;Before 1995&#39;</span><span class="p">)</span>
<span class="n">Cdf</span><span class="o">.</span><span class="n">from_seq</span><span class="p">(</span><span class="n">income</span><span class="p">[</span><span class="n">post95</span><span class="p">])</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;After 1995&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Income (1986 USD)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;CDF&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Distribution of income&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">();</span>
</pre></div>
</div>
</div>
</div>
<p>Below $30,000 the CDFs are almost identical; above that, we can see that the orange distribution is shifted to the right.</p>
<p>In other words, the fraction of people with high incomes is about the same, but the income of high earners has increased.</p>
<p>In general, I recommend CDFs for exploratory analysis.  They give you a clear view of the distribution, without too much noise, and they are good for comparing distributions, especially if you have more than two.</p>
<p><strong>Exercise:</strong> In the previous figure, the dollar amounts are big enough that the labels on the <code class="docutils literal notranslate"><span class="pre">x</span></code> axis are crowded.  Improve the figure by expressing income in 1000s of dollars (and update the <code class="docutils literal notranslate"><span class="pre">x</span></code> label accordingly).</p>
<p><strong>Exercise:</strong> Let’s compare incomes for different levels of education in the GSS dataset</p>
<p>To do that we’ll create Boolean Series to identify respondents with different levels of education.</p>
<ul class="simple">
<li><p>In the U.S, 12 years of education usually means the respondent has completed high school (secondary education).</p></li>
<li><p>A respondent with 14 years of education has probably completed an associate degree (two years of college)</p></li>
<li><p>Someone with 16 years has probably completed a bachelor’s degree (four years of college).</p></li>
</ul>
<p>Define Boolean Series named <code class="docutils literal notranslate"><span class="pre">high</span></code>, <code class="docutils literal notranslate"><span class="pre">assc</span></code>, and <code class="docutils literal notranslate"><span class="pre">bach</span></code> that are true for respondents with</p>
<ul class="simple">
<li><p>12 or fewer years of education,</p></li>
<li><p>13, 14, or 15 years, and</p></li>
<li><p>16 or more.</p></li>
</ul>
<p>Compute and plot the distribution of income for each group.  Remember to label the CDFs, display a legend, and label the axes.</p>
<p>Write a few sentences that describe and interpret the results.</p>
</div>
<div class="section" id="modeling-distributions">
<h2>Modeling distributions<a class="headerlink" href="#modeling-distributions" title="Permalink to this headline">¶</a></h2>
<p>Some distributions have names.  For example, you have probably heard of the normal distribution, also called the Gaussian distribution.  And you might have heard of others like the exponential distribution, binomial distribution, or maybe Poisson distribution.</p>
<p>These “distributions with names” are called “analytic” because they are described by analytic mathematical functions, as contrasted with “empirical” distributions, which are based on data.</p>
<p>It turns out that many things we measure in the world have distributions that are well approximated by a analytic distributions, so these distributions are sometimes good models for the real world.</p>
<p>In this context, what I mean by a “model” is a simplified description of the world that is accurate enough for its intended purpose.</p>
<p>In this section, you’ll learn to compute the CDF of a normal distribution and compare it to an empirical distribution of data.</p>
<p>But before we work with real data, I’ll start with some fake data, generated at random from an actual normal distribution.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="n">sample</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>NumPy provides <code class="docutils literal notranslate"><span class="pre">random.normal</span></code>, which generates values from a normal distribution with mean 0 and standard deviation 1.</p>
<p>Here’s what the empirical disrtribution of this fake data looks like.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cdf_sample</span> <span class="o">=</span> <span class="n">Cdf</span><span class="o">.</span><span class="n">from_seq</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span>
<span class="n">cdf_sample</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;Random sample&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;CDF&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">();</span>
</pre></div>
</div>
</div>
</div>
<p>This sigmoid shape is what we expect to see with values from a normal distribution.</p>
<p>If we did not know that this sample was drawn from a normal distribution, and we wanted to check, we could compare the CDF of the data to the CDF of an ideal normal distribution, which we can use the SciPy library to compute.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">scipy.stats</span> <span class="kn">import</span> <span class="n">norm</span>

<span class="n">xs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">ys</span> <span class="o">=</span> <span class="n">norm</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">cdf</span><span class="p">(</span><span class="n">xs</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>First we import <code class="docutils literal notranslate"><span class="pre">norm</span></code> from <code class="docutils literal notranslate"><span class="pre">scipy.stats</span></code>, which is a collection of functions related to statistics.</p>
<p>Then we use <code class="docutils literal notranslate"><span class="pre">linspace()</span></code> to create an array of equally-spaced points from -3 to 3; those are the <code class="docutils literal notranslate"><span class="pre">x</span></code> values where we will evaluate the normal CDF.</p>
<p>Next, <code class="docutils literal notranslate"><span class="pre">norm(0,</span> <span class="pre">1)</span></code> creates a value that represents a normal distribution with mean 0 and standard deviation 1.</p>
<p>Finally, <code class="docutils literal notranslate"><span class="pre">cdf()</span></code> computes the CDF of the normal distribution, evaluated at each of the <code class="docutils literal notranslate"><span class="pre">xs</span></code>.</p>
<p>I’ll plot the normal CDF with a gray line and then plot the CDF of the data again.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">xs</span><span class="p">,</span> <span class="n">ys</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Normal CDF&#39;</span><span class="p">)</span>
<span class="n">cdf_sample</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;Random sample&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;CDF&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">();</span>
</pre></div>
</div>
</div>
</div>
<p>The CDF of the random sample agrees with the normal model, but that’s not surprising because the data were actually sampled from a normal distribution.</p>
<p>When we collect data in the real world, we do not expect it to fit a normal distribution as well as this.  In the next exercise, we’ll try it and see.</p>
<p><strong>Exercise:</strong> Is the normal distribution a good model for the distribution of ages in the U.S. population?</p>
<p>To answer this question:</p>
<ul class="simple">
<li><p>Compute the mean and standard deviation of ages in the GSS dataset.</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">linspace</span></code> to create an array of <code class="docutils literal notranslate"><span class="pre">x</span></code> values between 18 and 89.</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">norm</span></code> to create a normal distribution with the same mean and standard deviation as the data, then use it to compute the normal CDF for each <code class="docutils literal notranslate"><span class="pre">x</span></code> value.</p></li>
<li><p>Plot the normal CDF with a gray line.</p></li>
<li><p>Plot the CDF of the ages in the GSS.</p></li>
</ul>
<p>How well do the plotted CDFs agree?</p>
<p><strong>Exercise:</strong> In many datasets, the distribution of income is approximately “lognormal”, which means that the logarithms of the incomes fit a normal distribution.  We’ll see whether that’s true for the GSS data.</p>
<ul class="simple">
<li><p>Extract <code class="docutils literal notranslate"><span class="pre">realinc</span></code> from <code class="docutils literal notranslate"><span class="pre">gss</span></code> and compute its logarithm using <code class="docutils literal notranslate"><span class="pre">np.log10()</span></code>.</p></li>
<li><p>Compute the mean and standard deviation of the log-transformed incomes.</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">norm</span></code> to make a normal distribution with the same mean and standard deviation as the log-transformed incomes.</p></li>
<li><p>Plot the CDF of the normal distribution.</p></li>
<li><p>Compute and plot the CDF of the log-transformed incomes.</p></li>
</ul>
<p>How similar are the CDFs of the log-transformed incomes and the normal distribution?</p>
</div>
<div class="section" id="probability-distribution-functions">
<h2>Probability distribution functions<a class="headerlink" href="#probability-distribution-functions" title="Permalink to this headline">¶</a></h2>
<p>We have learned about two ways to represent distributions, PMFs and CDFs.  Now we’ll learn another way: a probability density function, or PDF.  And we’ll learn how to estimate PDFs from data.</p>
<p><code class="docutils literal notranslate"><span class="pre">norm</span></code>, which we used to compute the normal CDF, can also compute the normal PDF:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">xs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">ys</span> <span class="o">=</span> <span class="n">norm</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">pdf</span><span class="p">(</span><span class="n">xs</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">xs</span><span class="p">,</span> <span class="n">ys</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Normal PDF&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;PDF&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Normal density function&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">();</span>
</pre></div>
</div>
</div>
</div>
<p>The normal PDF is the classic “bell curve”.</p>
<p>It is tempting to compare the PMF of the data to the PDF of the normal distribution, but that doesn’t work.</p>
<p>Let’s see what happens if we try:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">xs</span><span class="p">,</span> <span class="n">ys</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Normal PDF&#39;</span><span class="p">)</span>

<span class="n">pmf_sample</span> <span class="o">=</span> <span class="n">Pmf</span><span class="o">.</span><span class="n">from_seq</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span>
<span class="n">pmf_sample</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;Random sample&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;PDF&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Normal density function&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">();</span>
</pre></div>
</div>
</div>
</div>
<p>The PMF of the sample is a flat line across the bottom.  In the random sample, every value is unique, so they all have the same probability, one in 1000.</p>
<p>However, we can use the points in the sample to estimate the PDF of the distribution they came from.</p>
<p>This process is called “kernel density estimation”, or KDE.  It’s a way of getting from a PMF, a probability mass function, to a PDF, a probability density function.</p>
<p>To generate a KDE plot, we’ll use the Seaborn library, which I’ll import as <code class="docutils literal notranslate"><span class="pre">sns</span></code>.</p>
<p>Seaborn provides <code class="docutils literal notranslate"><span class="pre">kdeplot</span></code>, which takes the sample, estimates the PDF, and plots it.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>

<span class="n">sns</span><span class="o">.</span><span class="n">kdeplot</span><span class="p">(</span><span class="n">sample</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Estimated sample PDF&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;PDF&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Normal density function&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">();</span>
</pre></div>
</div>
</div>
</div>
<p>Now we can compare the KDE plot and the normal PDF.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">xs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">ys</span> <span class="o">=</span> <span class="n">norm</span><span class="o">.</span><span class="n">pdf</span><span class="p">(</span><span class="n">xs</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">xs</span><span class="p">,</span> <span class="n">ys</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Normal PDF&#39;</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">kdeplot</span><span class="p">(</span><span class="n">sample</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Estimated sample PDF&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;PDF&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Normal density function&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">();</span>
</pre></div>
</div>
</div>
</div>
<p>The KDE plot matches the normal PDF pretty well, although the differences look bigger when we compare PDFs than they did with the CDFs.</p>
<p>On one hand, that means that the PDF is a more sensitive way to look for differences, but often it is too sensitive.  It’s hard to tell whether apparent differences mean anything, or if they are just random, as in this case.</p>
<p><strong>Exercise:</strong> In a previous exercise, we asked “Is the normal distribution a good model for the distribution of ages in the U.S. population?”  To answer this questions, we plotted the CDF of the data and compared it to the CDF of a normal distribution with the same mean and standard deviation.</p>
<p>Now we’ll compare the estimated density of the data with the normal PDF.</p>
<ul class="simple">
<li><p>Again, compute the mean and standard deviation of ages in the GSS dataset.</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">linspace</span></code> to create an array of <code class="docutils literal notranslate"><span class="pre">x</span></code> values between 18 and 89.</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">norm</span></code> to create a normal distribution with the same mean and standard deviation as the data, then use it to compute the normal PDF for each <code class="docutils literal notranslate"><span class="pre">x</span></code> value.</p></li>
<li><p>Plot the normal PDF with a gray line.</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">sns.kdeplot</span></code> to estimate and plot the density of the ages in the GSS.</p></li>
</ul>
<p>Note: Seaborn can’t handle NaNs, so use <code class="docutils literal notranslate"><span class="pre">dropna</span></code> to drop them before calling <code class="docutils literal notranslate"><span class="pre">kdeplot</span></code>.</p>
<p>How well do the PDF and KDE plots agree?</p>
<p><strong>Exercise:</strong> In the previous exercise, we used CDFs to see if the distribution of income is lognormal.  We can make the same comparison using a PDF and KDE.</p>
<ul class="simple">
<li><p>Again, extract <code class="docutils literal notranslate"><span class="pre">realinc</span></code> from <code class="docutils literal notranslate"><span class="pre">gss</span></code> and compute its logarithm using <code class="docutils literal notranslate"><span class="pre">np.log10()</span></code>.</p></li>
<li><p>Compute the mean and standard deviation of the log-transformed incomes.</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">norm</span></code> to make a normal distribution with the same mean and standard deviation as the log-transformed incomes.</p></li>
<li><p>Plot the PDF of the normal distribution.</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">sns.kdeplot()</span></code> to estimate and plot the density of the log-transformed incomes.</p></li>
</ul>
<p>To summarize, we’ve seen three ways to visualize distributions, PMFs, CDFs, and KDE.</p>
<p>In general, I use CDFs when I am exploring data.  I think they give the best view of what’s going on without getting distracted by noise.</p>
<p>The biggest drawback of CDFs is that they are less well known.  If I am presenting results to an audience unfamiliar with CDFs, I’ll use a PMF for distributions with a small number of unique values and KDE if there are a lot of values.</p>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        
    <a class='left-prev' id="prev-link" href="07_dataframes.html" title="previous page">Dataframes</a>
    <a class='right-next' id="next-link" href="09_relationships.html" title="next page">Relationships</a>

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Allen B. Downey<br/>
        
            &copy; Copyright 2020.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    
  <script src="_static/js/index.d3f166471bb80abb5163.js"></script>


    
  </body>
</html>